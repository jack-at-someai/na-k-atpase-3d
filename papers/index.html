<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Charlotte Research Papers</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Crimson+Pro:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'Inter', -apple-system, sans-serif;
      background: #0a0e17;
      color: #e2e8f0;
      min-height: 100vh;
    }

    /* Header */
    .header {
      text-align: center;
      padding: 48px 24px 32px;
      border-bottom: 1px solid #1e293b;
    }
    .header h1 {
      font-size: 28px;
      font-weight: 700;
      letter-spacing: -0.5px;
      margin-bottom: 8px;
    }
    .header .subtitle {
      color: #64748b;
      font-size: 14px;
      margin-bottom: 16px;
    }
    .draft-badge {
      display: inline-block;
      background: #f59e0b22;
      color: #f59e0b;
      font-size: 11px;
      font-weight: 600;
      padding: 4px 12px;
      border-radius: 12px;
      letter-spacing: 1px;
      text-transform: uppercase;
    }

    /* Thesis banner */
    .thesis {
      max-width: 800px;
      margin: 32px auto;
      padding: 0 24px;
      text-align: center;
    }
    .thesis p {
      font-family: 'Crimson Pro', Georgia, serif;
      font-size: 18px;
      line-height: 1.7;
      color: #94a3b8;
      font-style: italic;
    }

    /* Stats bar */
    .stats {
      display: flex;
      justify-content: center;
      gap: 32px;
      padding: 24px;
      flex-wrap: wrap;
    }
    .stat {
      text-align: center;
    }
    .stat .num {
      font-size: 24px;
      font-weight: 700;
      color: #f8fafc;
    }
    .stat .label {
      font-size: 11px;
      color: #64748b;
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-top: 2px;
    }

    /* Paper grid */
    .grid {
      max-width: 1200px;
      margin: 0 auto;
      padding: 24px;
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(360px, 1fr));
      gap: 16px;
    }

    .card {
      background: #111827;
      border: 1px solid #1e293b;
      border-radius: 12px;
      padding: 24px;
      cursor: pointer;
      transition: all 0.2s;
      position: relative;
    }
    .card:hover {
      border-color: #334155;
      transform: translateY(-2px);
      box-shadow: 0 8px 24px rgba(0,0,0,0.3);
    }
    .card .number {
      position: absolute;
      top: 16px;
      right: 16px;
      font-size: 11px;
      font-weight: 600;
      color: #475569;
      background: #1e293b;
      padding: 2px 8px;
      border-radius: 8px;
    }
    .card h2 {
      font-size: 16px;
      font-weight: 600;
      line-height: 1.4;
      margin-bottom: 8px;
      padding-right: 40px;
      color: #f1f5f9;
    }
    .card .venue {
      font-size: 12px;
      color: #f59e0b;
      font-weight: 500;
      margin-bottom: 4px;
    }
    .card .type {
      font-size: 11px;
      color: #64748b;
      margin-bottom: 12px;
    }
    .card .abstract {
      font-size: 13px;
      line-height: 1.6;
      color: #94a3b8;
      display: -webkit-box;
      -webkit-line-clamp: 4;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }
    .card .read-link {
      display: inline-block;
      margin-top: 12px;
      font-size: 12px;
      font-weight: 600;
      color: #60a5fa;
    }

    /* Venue color coding */
    .venue-nature { border-left: 3px solid #ef4444; }
    .venue-ieee { border-left: 3px solid #3b82f6; }
    .venue-acm { border-left: 3px solid #8b5cf6; }
    .venue-springer { border-left: 3px solid #10b981; }
    .venue-mgmt { border-left: 3px solid #f59e0b; }
    .venue-neurips { border-left: 3px solid #ec4899; }
    .venue-cogsci { border-left: 3px solid #06b6d4; }

    /* Reader overlay */
    .reader-overlay {
      display: none;
      position: fixed;
      inset: 0;
      background: #0a0e17;
      z-index: 1000;
      overflow-y: auto;
    }
    .reader-overlay.active { display: block; }

    .reader-toolbar {
      position: sticky;
      top: 0;
      background: #0a0e17ee;
      backdrop-filter: blur(12px);
      border-bottom: 1px solid #1e293b;
      padding: 12px 24px;
      display: flex;
      align-items: center;
      gap: 16px;
      z-index: 10;
    }
    .reader-toolbar .back-btn {
      background: #1e293b;
      border: none;
      color: #e2e8f0;
      padding: 8px 16px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 13px;
      font-weight: 500;
      font-family: inherit;
    }
    .reader-toolbar .back-btn:hover { background: #334155; }
    .reader-toolbar .paper-title {
      font-size: 14px;
      font-weight: 600;
      color: #94a3b8;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
    .reader-toolbar .draft-mark {
      margin-left: auto;
      font-size: 11px;
      color: #f59e0b;
      font-weight: 600;
      letter-spacing: 1px;
      text-transform: uppercase;
      flex-shrink: 0;
    }

    .reader-content {
      max-width: 800px;
      margin: 0 auto;
      padding: 48px 24px 96px;
    }
    .reader-content .loading {
      text-align: center;
      padding: 64px;
      color: #64748b;
    }
    .reader-content .loading .spinner {
      display: inline-block;
      width: 24px;
      height: 24px;
      border: 2px solid #1e293b;
      border-top-color: #60a5fa;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }
    @keyframes spin { to { transform: rotate(360deg); } }

    /* Rendered markdown */
    .reader-content h1 {
      font-size: 28px;
      font-weight: 700;
      margin-bottom: 8px;
      line-height: 1.3;
    }
    .reader-content h2 {
      font-size: 22px;
      font-weight: 600;
      margin-top: 48px;
      margin-bottom: 16px;
      padding-top: 24px;
      border-top: 1px solid #1e293b;
      color: #f1f5f9;
    }
    .reader-content h3 {
      font-size: 17px;
      font-weight: 600;
      margin-top: 32px;
      margin-bottom: 12px;
      color: #e2e8f0;
    }
    .reader-content h4 {
      font-size: 15px;
      font-weight: 600;
      margin-top: 24px;
      margin-bottom: 8px;
      color: #cbd5e1;
    }
    .reader-content p {
      font-family: 'Crimson Pro', Georgia, serif;
      font-size: 17px;
      line-height: 1.8;
      color: #cbd5e1;
      margin-bottom: 16px;
    }
    .reader-content strong { color: #f1f5f9; }
    .reader-content em { color: #94a3b8; }
    .reader-content ul, .reader-content ol {
      margin: 12px 0 16px 24px;
      font-family: 'Crimson Pro', Georgia, serif;
      font-size: 17px;
      line-height: 1.8;
      color: #cbd5e1;
    }
    .reader-content li { margin-bottom: 4px; }
    .reader-content hr {
      border: none;
      border-top: 1px solid #1e293b;
      margin: 32px 0;
    }
    .reader-content table {
      width: 100%;
      border-collapse: collapse;
      margin: 16px 0;
      font-size: 14px;
      font-family: 'Inter', sans-serif;
    }
    .reader-content th {
      background: #1e293b;
      padding: 10px 12px;
      text-align: left;
      font-weight: 600;
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      color: #94a3b8;
      border-bottom: 1px solid #334155;
    }
    .reader-content td {
      padding: 10px 12px;
      border-bottom: 1px solid #1e293b;
      color: #cbd5e1;
      vertical-align: top;
    }
    .reader-content tr:hover td { background: #111827; }
    .reader-content code {
      font-family: 'SF Mono', Menlo, monospace;
      font-size: 14px;
      background: #1e293b;
      padding: 2px 6px;
      border-radius: 4px;
      color: #e2e8f0;
    }
    .reader-content pre {
      background: #111827;
      border: 1px solid #1e293b;
      border-radius: 8px;
      padding: 16px;
      overflow-x: auto;
      margin: 16px 0;
    }
    .reader-content pre code {
      background: none;
      padding: 0;
      font-size: 13px;
      line-height: 1.6;
    }
    .reader-content blockquote {
      border-left: 3px solid #334155;
      padding-left: 16px;
      margin: 16px 0;
      color: #94a3b8;
      font-style: italic;
    }

    /* Navigation between papers */
    .paper-nav {
      display: flex;
      justify-content: space-between;
      margin-top: 48px;
      padding-top: 24px;
      border-top: 1px solid #1e293b;
    }
    .paper-nav button {
      background: #1e293b;
      border: none;
      color: #e2e8f0;
      padding: 10px 20px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 13px;
      font-weight: 500;
      font-family: inherit;
    }
    .paper-nav button:hover { background: #334155; }
    .paper-nav button:disabled { opacity: 0.3; cursor: default; }

    @media (max-width: 600px) {
      .grid { grid-template-columns: 1fr; }
      .stats { gap: 16px; }
      .reader-content { padding: 24px 16px 64px; }
    }
  </style>
</head>
<body>

<div id="index-view">
  <div class="header">
    <h1>Charlotte Research Papers</h1>
    <p class="subtitle">Infrastructure for Observable Reality</p>
    <span class="draft-badge">Working Drafts &mdash; February 2026</span>
  </div>

  <div class="thesis">
    <p>Twelve papers across twelve venues &mdash; from Nature to NeurIPS &mdash; establishing that any domain where identities emit signals over time can be modeled by five primitives on a pre-built spatiotemporal substrate. Citations are placeholders. Figures are described but not yet created. These are living drafts.</p>
  </div>

  <div class="stats">
    <div class="stat"><div class="num">12</div><div class="label">Papers</div></div>
    <div class="stat"><div class="num">12</div><div class="label">Venues</div></div>
    <div class="stat"><div class="num">5</div><div class="label">Primitives</div></div>
    <div class="stat"><div class="num">4</div><div class="label">Validation Domains</div></div>
    <div class="stat"><div class="num">7,206</div><div class="label">Lines</div></div>
  </div>

  <div class="grid" id="paper-grid"></div>
</div>

<div class="reader-overlay" id="reader">
  <div class="reader-toolbar">
    <button class="back-btn" onclick="closeReader()">&larr; All Papers</button>
    <span class="paper-title" id="reader-title"></span>
    <span class="draft-mark">Draft</span>
  </div>
  <div class="reader-content" id="reader-content">
    <div class="loading"><div class="spinner"></div><p style="margin-top:12px;font-family:Inter,sans-serif;font-size:13px">Loading paper...</p></div>
  </div>
</div>

<script>
const PAPERS = [
  {
    num: 0,
    title: "Infrastructure for Observable Reality",
    venue: "Nature / Science",
    venueClass: "venue-nature",
    type: "Article (~3,000-5,000 words, 8-12 pages)",
    file: "PAPER_0_SYNTHESIS_DRAFT.md",
    lines: 337,
    abstract: "This paper presents a universal substrate architecture for modeling any domain in which identities emit signals over time. The system employs five primitives \u2014 NODE, EDGE, METRIC, SIGNAL, and PROTOCOL \u2014 unified on a pre-built spatiotemporal substrate. Cross-domain validation across four systems with radically different characteristics demonstrates structural convergence: all four domains map onto identical graph primitives without architectural modification."
  },
  {
    num: 1,
    title: "FINN \u2014 A Signal-Based Temporal Graph Architecture for Observable Systems",
    venue: "IEEE TKDE / IEEE ICDE",
    venueClass: "venue-ieee",
    type: "Full Research Paper (10-14 pages, IEEE two-column)",
    file: "PAPER_1_FINN_DRAFT.md",
    lines: 585,
    abstract: "Traditional database architectures store computed metrics as entity attributes, producing snapshots that diverge from reality through staleness, drift, update coupling, and lost history. This paper introduces FINN (Framework for Integrated Neural Networks), a graph-native temporal architecture in which all observational data flows through append-only signals \u2014 time-indexed measurements anchored to identity nodes via formally defined metrics."
  },
  {
    num: 2,
    title: "Operational Infrastructure for Signal-Driven Industries",
    venue: "Management Science",
    venueClass: "venue-mgmt",
    type: "Full Research Paper (20-25 pages)",
    file: "PAPER_2_BUSINESS_STRATEGY_DRAFT.md",
    lines: 443,
    abstract: "Business intelligence systems promise operational visibility but typically deliver dashboards built on stale, attribute-based metrics \u2014 cached snapshots that diverge from ground truth with every passing hour. We propose an infrastructure-level alternative in which all operational data flows through append-only, time-indexed signals and metrics are derived through graph traversal at query time, never stored as entity attributes."
  },
  {
    num: 3,
    title: "Recursive Flocking \u2014 Swarm Intelligence for Knowledge Graph Coordination",
    venue: "Swarm Intelligence Journal (Springer)",
    venueClass: "venue-springer",
    type: "Full Research Paper (15-20 pages)",
    file: "PAPER_3_SWARM_INTELLIGENCE_DRAFT.md",
    lines: 628,
    abstract: "This paper proposes recursive flocking, in which Reynolds' three rules of collective motion \u2014 separation, alignment, and cohesion \u2014 are applied at multiple organizational scales to achieve emergent coordination without central control. Simulation demonstrates O(log n) convergence, 40-60% improvement over flat coordination, and 90% recovery following agent removal."
  },
  {
    num: 4,
    title: "Containerized Knowledge Graphs with Register-Based Primitives and Pre-Built Spatiotemporal Substrate",
    venue: "IEEE Software",
    venueClass: "venue-ieee",
    type: "Full Research Paper (10-12 pages)",
    file: "PAPER_4_SUBSTRATE_ARCHITECTURE_DRAFT.md",
    lines: 577,
    abstract: "Multi-tenant knowledge graph systems suffer from collection sprawl and runtime context burden. This paper presents a substrate architecture that addresses both through a register-based document model encoding all information in a single collection, and a pre-built spatiotemporal substrate materializing temporal and spatial context as graph nodes prior to any user data."
  },
  {
    num: 5,
    title: "Universal Ontology Through Register-Based Primitives",
    venue: "ACM/IEEE MODELS",
    venueClass: "venue-acm",
    type: "Full Research Paper (12-15 pages)",
    file: "PAPER_5_DOMAIN_MODELING_DRAFT.md",
    lines: 537,
    abstract: "Domain-specific ontologies enable precise modeling within individual domains but fragment interoperability across domains. This paper proposes a universal domain modeling approach based on five register-based primitives and proves three formal properties: completeness, minimality, and orthogonality. Category-theoretic foundations establish the Charlotte category whose morphisms are the structural references between primitives."
  },
  {
    num: 6,
    title: "Interwoven Spatial Planes in Knowledge Graphs \u2014 Space as Pre-Built Graph Substrate",
    venue: "ACM SIGSPATIAL",
    venueClass: "venue-acm",
    type: "Full Research Paper",
    file: "PAPER_6_SPATIAL_PERCEPTION_DRAFT.md",
    lines: 571,
    abstract: "Geographic information systems treat space as coordinate geometry. This paper presents an alternative in which geographic reality is encoded as a pre-built graph substrate \u2014 spatial nodes connected by containment and cardinal direction edges. Evaluation on a production livestock registry shows 3-15x speedup on hierarchical containment queries compared to PostGIS."
  },
  {
    num: 7,
    title: "Time as Graph \u2014 A Temporal Substrate Architecture for Knowledge Graph Systems",
    venue: "ACM Transactions on Database Systems (TODS)",
    venueClass: "venue-acm",
    type: "Full Research Paper",
    file: "PAPER_7_TEMPORAL_PERCEPTION_DRAFT.md",
    lines: 775,
    abstract: "Temporal data management has been dominated by time as a scalar attribute for four decades. This paper presents a temporal data model in which time is a pre-built graph substrate: DATE and TIME nodes connected by NEXT edges, augmented by sub-temporal planes enabling calendar-aware traversal without date arithmetic. Evaluation shows 2-8x speedup on calendar-pattern queries."
  },
  {
    num: 8,
    title: "The Serialized Interface \u2014 Encoding User Interfaces as Knowledge Graph Traversals",
    venue: "ACM CHI / ACM UIST",
    venueClass: "venue-acm",
    type: "Full Research Paper",
    file: "PAPER_8_FRONTEND_AS_GRAPH_DRAFT.md",
    lines: 608,
    abstract: "Modern user interfaces are compiled artifacts that must be rebuilt to change a button's color. This paper presents an architecture in which the user interface is fully encoded in the same knowledge graph that stores domain data. Every visual element is a node, connected by typed edges, styled through signal values, and composed through containment. Deployment becomes graph mutation with millisecond latency."
  },
  {
    num: 9,
    title: "Tesseract Topology \u2014 4D Navigation Through Knowledge Space",
    venue: "ACM Symposium on Computational Geometry (SoCG)",
    venueClass: "venue-acm",
    type: "Full Research Paper",
    file: "PAPER_9_TESSERACT_TOPOLOGY_DRAFT.md",
    lines: 813,
    abstract: "Knowledge graphs with spatiotemporal substrates implicitly inhabit higher-dimensional coordinate spaces. This paper formalizes them as tesseract-structured graphs: four-dimensional lattices addressed by (longitude, latitude, date, hour). We develop a cardinal direction algebra with 80 distinct direction vectors and prove closure, invertibility, and reachability. Cyclical phenomena are modeled through torus wrapping."
  },
  {
    num: 10,
    title: "The Dead Teach the Living \u2014 Lifecycle Ensemble Learning from Completed Trajectories",
    venue: "NeurIPS / ICML",
    venueClass: "venue-neurips",
    type: "Full Research Paper",
    file: "PAPER_10_LIFECYCLE_ENSEMBLE_DRAFT.md",
    lines: 683,
    abstract: "Completed entity lifecycles carry maximal educational value at the precise moment they lose competitive value. We formalize the anonymization threshold and present an offline reinforcement learning framework that pools anonymized lifecycles across competing operations. Cross-operation ensembles outperform within-operation baselines by 23-31% on outcome prediction."
  },
  {
    num: 11,
    title: "Harmonic Resonance \u2014 Folding Time Across Generations",
    venue: "Cognitive Science / PNAS",
    venueClass: "venue-cogsci",
    type: "Full Research Paper",
    file: "PAPER_11_HARMONIC_RESONANCE_DRAFT.md",
    lines: 649,
    abstract: "Knowledge traditionally transfers between generations through articulation \u2014 an inherently lossy process. We propose an alternative inspired by sympathetic resonance in acoustics: when systems share natural frequency, phase alignment, and a connective medium, knowledge transfers spontaneously. Time folding emerges when each generation begins where the previous peaked rather than resetting to zero."
  }
];

const BASE_URL = "../charlotte/docs/artifacts/";
const grid = document.getElementById('paper-grid');
let currentPaper = -1;
const cache = {};

// Render cards
PAPERS.forEach((p, i) => {
  const card = document.createElement('div');
  card.className = `card ${p.venueClass}`;
  card.innerHTML = `
    <span class="number">#${p.num}</span>
    <div class="venue">${p.venue}</div>
    <h2>${p.title}</h2>
    <div class="type">${p.type} &middot; ${p.lines} lines</div>
    <div class="abstract">${p.abstract}</div>
    <span class="read-link">Read draft &rarr;</span>
  `;
  card.onclick = () => openPaper(i);
  grid.appendChild(card);
});

// Simple markdown renderer
function renderMarkdown(md) {
  let html = md;

  // Pre-process: protect code blocks
  const codeBlocks = [];
  html = html.replace(/```([\s\S]*?)```/g, (_, code) => {
    codeBlocks.push(code);
    return `%%CODEBLOCK_${codeBlocks.length - 1}%%`;
  });

  // Tables
  html = html.replace(/^(\|.+\|)\n(\|[-| :]+\|)\n((?:\|.+\|\n?)*)/gm, (match, header, sep, body) => {
    const ths = header.split('|').filter(c => c.trim()).map(c => `<th>${c.trim()}</th>`).join('');
    const rows = body.trim().split('\n').map(row => {
      const tds = row.split('|').filter(c => c.trim()).map(c => `<td>${c.trim()}</td>`).join('');
      return `<tr>${tds}</tr>`;
    }).join('');
    return `<table><thead><tr>${ths}</tr></thead><tbody>${rows}</tbody></table>`;
  });

  // Headings
  html = html.replace(/^#### (.+)$/gm, '<h4>$1</h4>');
  html = html.replace(/^### (.+)$/gm, '<h3>$1</h3>');
  html = html.replace(/^## (.+)$/gm, '<h2>$1</h2>');
  html = html.replace(/^# (.+)$/gm, '<h1>$1</h1>');

  // Horizontal rules
  html = html.replace(/^---+$/gm, '<hr>');

  // Bold and italic
  html = html.replace(/\*\*\*(.+?)\*\*\*/g, '<strong><em>$1</em></strong>');
  html = html.replace(/\*\*(.+?)\*\*/g, '<strong>$1</strong>');
  html = html.replace(/\*([^*\n]+)\*/g, '<em>$1</em>');

  // Inline code
  html = html.replace(/`([^`]+)`/g, '<code>$1</code>');

  // Unordered lists
  html = html.replace(/^(\s*)[-*] (.+)$/gm, (_, indent, text) => {
    const depth = indent.length > 1 ? ' style="margin-left:20px"' : '';
    return `<li${depth}>${text}</li>`;
  });
  html = html.replace(/((?:<li[^>]*>.*<\/li>\n?)+)/g, '<ul>$1</ul>');

  // Ordered lists
  html = html.replace(/^\d+\. (.+)$/gm, '<oli>$1</oli>');
  html = html.replace(/((?:<oli>.*<\/oli>\n?)+)/g, (m) => {
    return '<ol>' + m.replace(/<oli>/g, '<li>').replace(/<\/oli>/g, '</li>') + '</ol>';
  });

  // Paragraphs - wrap remaining text lines
  html = html.replace(/^(?!<[a-z/]|%%CODE)(.+)$/gm, (_, line) => {
    if (line.trim() === '') return '';
    return `<p>${line}</p>`;
  });

  // Restore code blocks
  html = html.replace(/%%CODEBLOCK_(\d+)%%/g, (_, i) => {
    const code = codeBlocks[parseInt(i)];
    const lang = code.match(/^(\w+)\n/) ? code.match(/^(\w+)\n/)[1] : '';
    const content = lang ? code.slice(lang.length + 1) : code;
    return `<pre><code>${content.replace(/</g, '&lt;').replace(/>/g, '&gt;')}</code></pre>`;
  });

  // Clean up empty paragraphs
  html = html.replace(/<p>\s*<\/p>/g, '');

  return html;
}

async function openPaper(index) {
  currentPaper = index;
  const p = PAPERS[index];
  document.getElementById('reader-title').textContent = `#${p.num} \u2014 ${p.title}`;
  document.getElementById('reader-content').innerHTML = '<div class="loading"><div class="spinner"></div><p style="margin-top:12px;font-family:Inter,sans-serif;font-size:13px">Loading paper...</p></div>';
  document.getElementById('reader').classList.add('active');
  document.body.style.overflow = 'hidden';
  window.scrollTo(0, 0);

  try {
    let md;
    if (cache[p.file]) {
      md = cache[p.file];
    } else {
      const resp = await fetch(BASE_URL + p.file);
      if (!resp.ok) throw new Error(`Failed to load ${p.file}`);
      md = await resp.text();
      cache[p.file] = md;
    }

    const rendered = renderMarkdown(md);
    const nav = `<div class="paper-nav">
      <button ${index === 0 ? 'disabled' : ''} onclick="openPaper(${index - 1})">&larr; Paper #${index > 0 ? PAPERS[index-1].num : 0}</button>
      <button ${index === PAPERS.length - 1 ? 'disabled' : ''} onclick="openPaper(${index + 1})">Paper #${index < PAPERS.length - 1 ? PAPERS[index+1].num : 11} &rarr;</button>
    </div>`;

    document.getElementById('reader-content').innerHTML = rendered + nav;
    document.getElementById('reader').scrollTop = 0;
  } catch (err) {
    document.getElementById('reader-content').innerHTML = `<div class="loading"><p style="font-family:Inter,sans-serif;font-size:14px;color:#ef4444">Error loading paper: ${err.message}</p><p style="font-family:Inter,sans-serif;font-size:13px;color:#64748b;margin-top:8px">The markdown source is at <code>${BASE_URL}${p.file}</code></p></div>`;
  }
}

function closeReader() {
  document.getElementById('reader').classList.remove('active');
  document.body.style.overflow = '';
}

// Keyboard navigation
document.addEventListener('keydown', (e) => {
  if (!document.getElementById('reader').classList.contains('active')) return;
  if (e.key === 'Escape') closeReader();
  if (e.key === 'ArrowLeft' && currentPaper > 0) openPaper(currentPaper - 1);
  if (e.key === 'ArrowRight' && currentPaper < PAPERS.length - 1) openPaper(currentPaper + 1);
});
</script>

</body>
</html>
