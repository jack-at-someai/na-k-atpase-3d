<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Charlotte OS — Gantt</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{
  --bg:#141414;--surface:#1A1A1A;--card:#222222;--border:#333333;
  --text:#E8E0E0;--dim:#888;--red:#E53E3E;--red-light:#F56565;
  --mauve:#C4A8A8;--mauve-dark:#9B7878;--mauve-deep:#6B4F4F;
  --amber:#F6AD55;--green:#68D391;--blue:#63B3ED;--purple:#9F7AEA;
  --glass:rgba(30,30,30,0.6);--glass-border:rgba(255,255,255,0.08);
  --radius:10px;--font:Inter,-apple-system,system-ui,sans-serif;
  --mono:'SF Mono','Cascadia Code',monospace;
}
html,body{height:100%;background:var(--bg);color:var(--text);font-family:var(--font)}
a{color:var(--red);text-decoration:none}
a:hover{text-decoration:underline}

/* Header */
.header{padding:32px 32px 0;display:flex;align-items:baseline;gap:16px;flex-wrap:wrap}
.header h1{font-size:22px;font-weight:700}
.header .sub{font-size:13px;color:var(--dim)}
.header .back{font-size:12px;margin-left:auto;color:var(--mauve)}

/* Legend */
.legend{display:flex;gap:16px;padding:16px 32px;flex-wrap:wrap}
.legend-item{display:flex;align-items:center;gap:6px;font-size:11px;color:var(--dim)}
.legend-dot{width:10px;height:10px;border-radius:3px}

/* Status pills */
.status{display:inline-block;font-size:10px;font-weight:600;padding:2px 8px;border-radius:10px;text-transform:uppercase;letter-spacing:0.5px}
.status.done{background:rgba(104,211,145,0.15);color:var(--green)}
.status.active{background:rgba(229,62,62,0.15);color:var(--red)}
.status.pending{background:rgba(136,136,136,0.15);color:var(--dim)}
.status.blocked{background:rgba(246,173,85,0.15);color:var(--amber)}

/* Chart container */
.chart-wrap{padding:24px 32px;overflow-x:auto}
.chart{min-width:900px}

/* Timeline header */
.timeline-header{display:grid;grid-template-columns:280px 1fr;border-bottom:1px solid var(--border);padding-bottom:8px;margin-bottom:4px}
.timeline-dates{display:grid;position:relative}
.timeline-dates .day{font-size:10px;color:var(--dim);text-align:center;font-family:var(--mono);border-left:1px solid rgba(255,255,255,0.04);padding:2px 0}
.timeline-dates .day.today{color:var(--red);font-weight:600;background:rgba(229,62,62,0.05)}
.timeline-dates .day.weekend{color:rgba(136,136,136,0.4)}

/* Rows */
.row{display:grid;grid-template-columns:280px 1fr;min-height:36px;align-items:center;border-bottom:1px solid rgba(255,255,255,0.03)}
.row:hover{background:rgba(255,255,255,0.02)}
.row-label{padding:0 12px;font-size:12px;display:flex;align-items:center;gap:8px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.row-label .icon{width:16px;text-align:center;font-size:11px}
.row-label .name{font-weight:500}
.row-label .dep{font-size:10px;color:var(--dim);margin-left:auto}
.row-track{position:relative;height:36px}

/* Bars */
.bar{position:absolute;height:20px;top:8px;border-radius:4px;display:flex;align-items:center;padding:0 6px;font-size:9px;font-weight:600;color:#fff;white-space:nowrap;overflow:hidden;transition:opacity 0.2s;cursor:default}
.bar:hover{opacity:0.85}
.bar.software{background:linear-gradient(90deg,var(--red),var(--red-light))}
.bar.hardware{background:linear-gradient(90deg,var(--blue),#90CDF4)}
.bar.integration{background:linear-gradient(90deg,var(--purple),#B794F4)}
.bar.isg{background:linear-gradient(90deg,var(--amber),#FBD38D)}
.bar.polish{background:linear-gradient(90deg,var(--green),#9AE6B4)}
.bar.milestone{background:none;border:2px solid var(--red);height:20px;width:20px;border-radius:4px;transform:rotate(45deg);padding:0;top:8px}
.bar.done-overlay{opacity:0.5;background-image:repeating-linear-gradient(135deg,transparent,transparent 4px,rgba(255,255,255,0.1) 4px,rgba(255,255,255,0.1) 8px)}

/* Today line */
.today-line{position:absolute;top:0;bottom:0;width:2px;background:var(--red);z-index:10;pointer-events:none}
.today-line::after{content:'TODAY';position:absolute;top:-18px;left:-16px;font-size:8px;color:var(--red);font-weight:700;letter-spacing:1px}

/* Summary cards */
.summary{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:12px;padding:24px 32px}
.summary-card{background:var(--glass);border:1px solid var(--glass-border);border-radius:var(--radius);padding:16px;backdrop-filter:blur(12px)}
.summary-card h3{font-size:11px;color:var(--dim);text-transform:uppercase;letter-spacing:1px;margin-bottom:8px}
.summary-card .value{font-size:28px;font-weight:700;font-family:var(--mono)}
.summary-card .detail{font-size:11px;color:var(--dim);margin-top:4px}

/* Notes section */
.notes{padding:24px 32px;max-width:800px}
.notes h2{font-size:16px;margin-bottom:12px}
.notes ul{list-style:none;padding:0}
.notes li{padding:6px 0;font-size:13px;color:var(--dim);border-bottom:1px solid rgba(255,255,255,0.03)}
.notes li::before{content:'';display:inline-block;width:6px;height:6px;border-radius:50%;margin-right:10px;vertical-align:middle}
.notes li.done::before{background:var(--green)}
.notes li.active::before{background:var(--red)}
.notes li.pending::before{background:var(--dim)}
</style>
</head>
<body>

<div class="header">
  <h1>Charlotte OS Demo</h1>
  <span class="sub">Feb 23, 2026 — ISG Meeting Sprint</span>
  <a class="back" href="../../">&larr; Back to Index</a>
</div>

<!-- Summary Cards -->
<div class="summary" id="summary"></div>

<!-- Legend -->
<div class="legend">
  <div class="legend-item"><div class="legend-dot" style="background:var(--red)"></div>Software</div>
  <div class="legend-item"><div class="legend-dot" style="background:var(--blue)"></div>Hardware</div>
  <div class="legend-item"><div class="legend-dot" style="background:var(--purple)"></div>Integration</div>
  <div class="legend-item"><div class="legend-dot" style="background:var(--amber)"></div>ISG Prep</div>
  <div class="legend-item"><div class="legend-dot" style="background:var(--green)"></div>Polish</div>
  <div class="legend-item"><div class="legend-dot" style="background:var(--red);width:12px;height:12px;transform:rotate(45deg);border-radius:2px"></div>Milestone</div>
  <div class="legend-item"><span style="font-size:9px;color:var(--dim)">Striped = Complete</span></div>
</div>

<!-- Gantt Chart -->
<div class="chart-wrap">
  <div class="chart" id="chart"></div>
</div>

<!-- Notes -->
<div class="notes" id="notes"></div>

<script>
// ════════════════════════════════════════════════════════════
// Charlotte OS Demo — Gantt Chart
// ════════════════════════════════════════════════════════════

const START = new Date('2026-02-11');
const END   = new Date('2026-02-24');
const TODAY = new Date();
TODAY.setHours(0,0,0,0);

const TOTAL_DAYS = Math.ceil((END - START) / 86400000) + 1; // 14 days

// ── Task Data ──
// status: done | active | pending | blocked
// cat: software | hardware | integration | isg | polish | milestone
const TASKS = [
  // Day 0 (Feb 11) — Already done
  { name: 'Charlotte server + observation loop', cat: 'software', start: '02-11', end: '02-11', status: 'done', dep: '' },
  { name: 'KRF fact generator (S-expressions)', cat: 'software', start: '02-11', end: '02-11', status: 'done', dep: '' },
  { name: 'Face engine (recognition + emotion)', cat: 'software', start: '02-11', end: '02-11', status: 'done', dep: '' },
  { name: 'Camera ingest (MJPEG puller)', cat: 'software', start: '02-11', end: '02-11', status: 'done', dep: '' },
  { name: 'Protocol engine (phase tracking)', cat: 'software', start: '02-11', end: '02-11', status: 'done', dep: '' },
  { name: 'Minutes generator + HTML output', cat: 'software', start: '02-11', end: '02-11', status: 'done', dep: '' },
  { name: 'Live visualization (Canvas + WS)', cat: 'software', start: '02-11', end: '02-11', status: 'done', dep: '' },
  { name: 'Pi setup scripts (Pi 5 + Zero W)', cat: 'software', start: '02-11', end: '02-11', status: 'done', dep: '' },
  { name: 'Meeting protocol definition (8 phases)', cat: 'software', start: '02-11', end: '02-11', status: 'done', dep: '' },
  { name: 'Demo mode tested (WebSocket confirmed)', cat: 'software', start: '02-11', end: '02-11', status: 'done', dep: '' },

  // Days 1-2 (Feb 12-13) — Hardware bring-up
  { name: 'Flash Pi 5 SD card + boot', cat: 'hardware', start: '02-12', end: '02-12', status: 'pending', dep: '' },
  { name: 'Flash 2x Pi Zero W SD cards', cat: 'hardware', start: '02-12', end: '02-12', status: 'pending', dep: '' },
  { name: 'SSH into all 3 Pis on WiFi', cat: 'hardware', start: '02-12', end: '02-13', status: 'pending', dep: 'Flash Pis' },
  { name: 'Run pi5-setup.sh (install deps)', cat: 'hardware', start: '02-13', end: '02-13', status: 'pending', dep: 'SSH Pi 5' },
  { name: 'Run pi-zero-setup.sh (x2)', cat: 'hardware', start: '02-13', end: '02-13', status: 'pending', dep: 'SSH Zeros' },
  { name: 'Zeus Car ESP32-CAM stream verified', cat: 'hardware', start: '02-12', end: '02-12', status: 'pending', dep: '' },
  { name: 'MILESTONE: All devices on network', cat: 'milestone', start: '02-13', end: '02-13', status: 'pending', dep: '' },

  // Days 3-4 (Feb 14-15) — Camera streaming
  { name: 'Pi Zero W camera streams verified', cat: 'hardware', start: '02-14', end: '02-14', status: 'pending', dep: 'All devices' },
  { name: 'Pi 5 pulling 3 MJPEG streams', cat: 'integration', start: '02-14', end: '02-15', status: 'pending', dep: 'Camera streams' },
  { name: 'Frame rate test (target 5-10 FPS)', cat: 'integration', start: '02-15', end: '02-15', status: 'pending', dep: 'MJPEG pull' },

  // Days 5-6 (Feb 16-17) — Face pipeline on real hardware
  { name: 'Enroll 8 faces (photos)', cat: 'integration', start: '02-16', end: '02-16', status: 'pending', dep: '' },
  { name: 'Face recognition on Pi 5 (live)', cat: 'integration', start: '02-16', end: '02-17', status: 'pending', dep: 'Enroll faces' },
  { name: 'Emotion detection tuning on Pi 5', cat: 'integration', start: '02-17', end: '02-17', status: 'pending', dep: 'Face recog' },
  { name: 'MILESTONE: Faces identified live', cat: 'milestone', start: '02-17', end: '02-17', status: 'pending', dep: '' },

  // Days 7-8 (Feb 18-19) — Full integration
  { name: 'Visualization on boardroom display', cat: 'integration', start: '02-18', end: '02-18', status: 'pending', dep: 'Faces live' },
  { name: 'End-to-end: camera → facts → display', cat: 'integration', start: '02-18', end: '02-19', status: 'pending', dep: 'Viz display' },
  { name: 'Protocol divergence visible on timeline', cat: 'integration', start: '02-19', end: '02-19', status: 'pending', dep: 'E2E' },

  // Days 9-10 (Feb 20-21) — Minutes + ISG prep
  { name: 'Live minutes generation tested', cat: 'integration', start: '02-20', end: '02-20', status: 'pending', dep: 'E2E' },
  { name: 'Marching orders output reviewed', cat: 'integration', start: '02-20', end: '02-20', status: 'pending', dep: 'Minutes' },
  { name: 'ISG presentation deck finalized', cat: 'isg', start: '02-19', end: '02-21', status: 'pending', dep: '' },
  { name: 'ServiceIQ narrative prepared', cat: 'isg', start: '02-20', end: '02-21', status: 'pending', dep: '' },

  // Day 11 (Feb 22) — Dress rehearsal
  { name: 'Full dress rehearsal (3+ people)', cat: 'polish', start: '02-22', end: '02-22', status: 'pending', dep: 'All integration' },
  { name: 'Fix lighting / camera angles', cat: 'polish', start: '02-22', end: '02-22', status: 'pending', dep: 'Rehearsal' },
  { name: 'Backup plan confirmed', cat: 'polish', start: '02-22', end: '02-22', status: 'pending', dep: '' },
  { name: 'MILESTONE: Demo ready', cat: 'milestone', start: '02-22', end: '02-22', status: 'pending', dep: '' },

  // Day 12 (Feb 23) — Show day
  { name: 'Pre-enroll all 8 attendee faces', cat: 'polish', start: '02-23', end: '02-23', status: 'pending', dep: '' },
  { name: 'Hardware setup in boardroom', cat: 'hardware', start: '02-23', end: '02-23', status: 'pending', dep: '' },
  { name: 'MILESTONE: Feb 23 Meeting', cat: 'milestone', start: '02-23', end: '02-23', status: 'pending', dep: '' },
];

// ── Rendering ──

function dayIndex(dateStr) {
  const d = new Date(`2026-${dateStr}`);
  return Math.round((d - START) / 86400000);
}

function todayIndex() {
  return Math.round((TODAY - START) / 86400000);
}

function isWeekend(dayOffset) {
  const d = new Date(START.getTime() + dayOffset * 86400000);
  return d.getDay() === 0 || d.getDay() === 6;
}

function dayLabel(dayOffset) {
  const d = new Date(START.getTime() + dayOffset * 86400000);
  const months = ['Jan','Feb','Mar'];
  return `${months[d.getMonth()]} ${d.getDate()}`;
}

function render() {
  const chart = document.getElementById('chart');
  const todayIdx = todayIndex();

  // Timeline header
  let headerHTML = '<div class="timeline-header"><div style="font-size:11px;color:var(--dim);padding:0 12px">Task</div><div class="timeline-dates" style="grid-template-columns:repeat(' + TOTAL_DAYS + ',1fr)">';
  for (let i = 0; i < TOTAL_DAYS; i++) {
    const cls = i === todayIdx ? 'day today' : isWeekend(i) ? 'day weekend' : 'day';
    headerHTML += `<div class="${cls}">${dayLabel(i)}</div>`;
  }
  headerHTML += '</div></div>';

  // Task rows
  let rowsHTML = '';
  TASKS.forEach(task => {
    const si = dayIndex(task.start);
    const ei = dayIndex(task.end);
    const left = (si / TOTAL_DAYS * 100).toFixed(2);
    const width = ((ei - si + 1) / TOTAL_DAYS * 100).toFixed(2);

    const isMilestone = task.cat === 'milestone';
    const statusCls = task.status;
    const icon = task.status === 'done' ? '&#x2713;' : task.status === 'active' ? '&#x25CF;' : '&#x25CB;';

    let barCls = `bar ${task.cat}`;
    if (task.status === 'done') barCls += ' done-overlay';

    rowsHTML += `<div class="row">`;
    rowsHTML += `<div class="row-label"><span class="icon">${icon}</span><span class="name">${task.name}</span>`;
    if (task.dep) rowsHTML += `<span class="dep">${task.dep}</span>`;
    rowsHTML += `</div>`;
    rowsHTML += `<div class="row-track" style="display:grid;grid-template-columns:repeat(${TOTAL_DAYS},1fr)">`;

    if (isMilestone) {
      const mLeft = ((si + 0.3) / TOTAL_DAYS * 100).toFixed(2);
      rowsHTML += `<div class="bar milestone" style="left:${mLeft}%" title="${task.name}"></div>`;
    } else {
      rowsHTML += `<div class="${barCls}" style="left:${left}%;width:${width}%" title="${task.name} (${task.start} - ${task.end})">${task.name}</div>`;
    }

    // Today line
    if (todayIdx >= 0 && todayIdx < TOTAL_DAYS) {
      const tl = ((todayIdx + 0.5) / TOTAL_DAYS * 100).toFixed(2);
      rowsHTML += `<div class="today-line" style="left:${tl}%"></div>`;
    }

    rowsHTML += `</div></div>`;
  });

  chart.innerHTML = headerHTML + rowsHTML;

  // Summary cards
  const done = TASKS.filter(t => t.status === 'done').length;
  const active = TASKS.filter(t => t.status === 'active').length;
  const pending = TASKS.filter(t => t.status === 'pending').length;
  const milestones = TASKS.filter(t => t.cat === 'milestone');
  const daysLeft = Math.max(0, Math.ceil((new Date('2026-02-23') - TODAY) / 86400000));

  document.getElementById('summary').innerHTML = `
    <div class="summary-card">
      <h3>Progress</h3>
      <div class="value" style="color:var(--green)">${done}/${TASKS.length}</div>
      <div class="detail">${pending} pending, ${active} active</div>
    </div>
    <div class="summary-card">
      <h3>Days to Demo</h3>
      <div class="value" style="color:${daysLeft <= 3 ? 'var(--red)' : 'var(--amber)'}">${daysLeft}</div>
      <div class="detail">Feb 23, 2026</div>
    </div>
    <div class="summary-card">
      <h3>Milestones</h3>
      <div class="value" style="color:var(--mauve)">${milestones.filter(m=>m.status==='done').length}/${milestones.length}</div>
      <div class="detail">Next: ${(milestones.find(m=>m.status!=='done')||{name:'All done'}).name}</div>
    </div>
    <div class="summary-card">
      <h3>Software</h3>
      <div class="value" style="color:var(--green)">100%</div>
      <div class="detail">All 10 modules built + tested</div>
    </div>
  `;

  // Notes
  document.getElementById('notes').innerHTML = `
    <h2>Status Notes</h2>
    <ul>
      <li class="done">Charlotte server: async WebSocket + HTTP, observation loop, demo mode</li>
      <li class="done">KRF facts: S-expression format matching kernel/primitives.krf</li>
      <li class="done">Face engine: face_recognition + FER with simulation fallback</li>
      <li class="done">Camera ingest: MJPEG SOI/EOI marker parsing, auto-reconnect</li>
      <li class="done">Protocol engine: 8-phase meeting, expected vs actual divergence</li>
      <li class="done">Minutes generator: per-person stats, HTML output, marching orders</li>
      <li class="done">Live visualization: Canvas graph + sparklines + timeline + fact stream</li>
      <li class="done">Pi setup scripts: pi5-setup.sh, pi-zero-setup.sh</li>
      <li class="done">Meeting protocol: 8 phases defined (85 min total)</li>
      <li class="done">Demo mode: end-to-end WebSocket streaming confirmed on Windows</li>
      <li class="active">Hardware: Pi 5, 2x Pi Zero W, Zeus Car — not yet flashed</li>
      <li class="pending">ISG presentation materials</li>
      <li class="pending">Dress rehearsal</li>
    </ul>
    <h2 style="margin-top:24px">Hardware Inventory</h2>
    <ul>
      <li class="pending">Raspberry Pi 5 — central brain, runs Charlotte server</li>
      <li class="pending">Raspberry Pi Zero W #1 — left room camera (eye-left)</li>
      <li class="pending">Raspberry Pi Zero W #2 — right room camera (eye-right)</li>
      <li class="pending">Zeus Car (Arduino + ESP32-CAM) — face camera on center table</li>
      <li class="pending">SD cards (3x), USB-C power (3x), Pi Camera Modules or USB webcams</li>
      <li class="pending">HDMI adapter for Pi 5 to boardroom display</li>
    </ul>
    <h2 style="margin-top:24px">Risk Items</h2>
    <ul>
      <li class="pending">WiFi reliability in boardroom — bring dedicated travel router</li>
      <li class="pending">Lighting for face detection — test camera angles in actual room</li>
      <li class="pending">Emotion model accuracy — acceptable for demo (architecture > accuracy)</li>
      <li class="done">Fallback: --demo mode generates synthetic data if hardware fails</li>
    </ul>
  `;
}

render();
</script>
</body>
</html>
