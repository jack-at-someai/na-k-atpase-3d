<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SomeAI</title>
  <link rel="icon"href="design/brandbook/someai/assets/LOGO.png">
  <link rel="apple-touch-icon" href="design/brandbook/someai/assets/LOGO.png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    /* === Reset === */
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    /* === Base Layout === */
    body {
      font-family: 'Inter', -apple-system, sans-serif;
      background: #141414;
      color: #E8E0E0;
      min-height: 100vh;
      padding: 0 24px 48px;
    }

    /* === Spider Web Background (Layer 1) === */
    #web-bg {
      position: fixed;
      inset: 0;
      z-index: -1;
      display: flex;
      align-items: center;
      justify-content: center;
      pointer-events: none;
    }
    #web-bg svg {
      width: 120vmax;
      height: 120vmax;
    }
    .web-strands {
      animation: neural-idle 12s ease-in-out infinite;
    }
    @keyframes neural-idle {
      0%, 100% { opacity: 0.04; }
      50% { opacity: 0.07; }
    }
    .junction { opacity: 0; transition: opacity 0.1s; }

    /* === Hero (Layer 2) === */
    #hero {
      position: relative;
      width: calc(100% + 48px);
      margin: 0 -24px 48px;
      height: 400px;
      overflow: hidden;
    }
    /* === Micro-Graph Background (full page, behind everything) === */
    #particle-canvas {
      position: fixed;
      inset: 0;
      width: 100%;
      height: 100%;
      z-index: -2;
      pointer-events: none;
    }
    .hero-overlay {
      position: absolute;
      inset: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      pointer-events: none;
      z-index: 1;
    }
    .hero-overlay h1 {
      font-size: 48px;
      font-weight: 800;
      letter-spacing: -2px;
      margin-bottom: 12px;
      text-align: center;
      background: linear-gradient(135deg, #FFFFFF 0%, #C4A8A8 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    .hero-overlay .subtitle {
      text-align: center;
      color: #666666;
      font-size: 15px;
      max-width: 600px;
      line-height: 1.6;
    }

    /* === Abstract === */
    .abstract {
      max-width: 800px;
      margin: 0 auto 48px;
      padding: 32px;
      background: linear-gradient(135deg, rgba(229,62,62,0.05) 0%, rgba(155,120,120,0.04) 100%);
      border: 1px solid #333333;
      border-radius: 16px;
      opacity: 0;
      transform: translateY(24px);
      transition: opacity 0.6s ease, transform 0.6s ease;
    }
    .abstract.visible { opacity: 1; transform: none; }
    .abstract h2 {
      font-size: 16px;
      font-weight: 600;
      color: #E53E3E;
      letter-spacing: 0.5px;
      text-transform: uppercase;
      margin-bottom: 16px;
    }
    .abstract p {
      font-size: 14px;
      line-height: 1.7;
      color: #999999;
      margin-bottom: 12px;
    }
    .abstract p:last-child { margin-bottom: 0; }
    .abstract strong { color: #E8E0E0; font-weight: 600; }
    .abstract .highlight { color: #E53E3E; font-weight: 500; }

    /* === Five Primitives (Layer 3) === */
    .primitives-section {
      max-width: 800px;
      margin: 0 auto 48px;
      padding: 0 4px;
      text-align: center;
      opacity: 0;
      transform: translateY(24px);
      transition: opacity 0.8s ease, transform 0.8s ease;
    }
    .primitives-section.visible { opacity: 1; transform: none; }
    .primitives-header h2 {
      font-size: 18px;
      font-weight: 700;
      letter-spacing: -0.5px;
      margin-bottom: 4px;
    }
    .primitives-header p {
      font-size: 13px;
      color: #666666;
      margin-bottom: 32px;
    }
    .primitives-diagram {
      margin-bottom: 32px;
    }
    .primitives-diagram svg {
      width: 100%;
      max-width: 800px;
    }
    .flow-arrow {
      animation: dash-flow 1.5s linear infinite;
    }
    @keyframes dash-flow {
      to { stroke-dashoffset: -10; }
    }
    .primitives-grid {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 12px;
    }
    .primitive-card {
      background: #1A1A1A;
      border: 1px solid #333333;
      border-radius: 12px;
      padding: 20px 12px;
      text-align: center;
    }
    .primitive-icon {
      font-size: 24px;
      margin-bottom: 8px;
    }
    .primitive-card h3 {
      font-size: 11px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 8px;
    }
    .primitive-card p {
      font-size: 11px;
      line-height: 1.5;
      color: #999999;
    }

    /* === Divider === */
    .divider {
      max-width: 800px;
      margin: 0 auto 40px;
      border: none;
      border-top: 1px solid #333333;
    }

    /* === Investment Thesis Section === */
    .thesis {
      max-width: 960px;
      margin: 0 auto 48px;
      padding: 0 24px;
    }
    .thesis-header {
      text-align: center;
      margin-bottom: 32px;
    }
    .thesis-header h2 {
      font-size: 22px;
      font-weight: 700;
      letter-spacing: -0.5px;
      color: #E8E0E0;
      margin-bottom: 6px;
    }
    .thesis-header .tagline {
      font-size: 13px;
      color: #666666;
    }
    .thesis-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px;
      margin-bottom: 24px;
    }
    .thesis-card {
      background: #1A1A1A;
      border: 1px solid #333333;
      border-radius: 14px;
      padding: 24px;
      opacity: 0;
      transform: translateY(24px);
      transition: opacity 0.6s ease, transform 0.6s ease;
    }
    .thesis-card.visible { opacity: 1; transform: none; }
    .thesis-card h3 {
      font-size: 13px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 10px;
    }
    .thesis-card h3.blue { color: #F56565; }
    .thesis-card h3.green { color: #68D391; }
    .thesis-card h3.amber { color: #F59E0B; }
    .thesis-card h3.purple { color: #C4A8A8; }
    .thesis-card p {
      font-size: 13px;
      line-height: 1.65;
      color: #999999;
    }
    .thesis-card strong { color: #E8E0E0; }
    .thesis-card .val-highlight { font-weight: 500; }
    .thesis-card .val-highlight.blue { color: #F56565; }
    .thesis-card .val-highlight.green { color: #68D391; }
    .thesis-card .val-highlight.amber { color: #F59E0B; }
    .thesis-card .val-highlight.purple { color: #C4A8A8; }
    .thesis-wide {
      background: linear-gradient(135deg, rgba(229,62,62,0.06) 0%, rgba(155,120,120,0.04) 50%, rgba(107,79,79,0.04) 100%);
      border: 1px solid #333333;
      border-radius: 14px;
      padding: 28px 32px;
      margin-bottom: 24px;
      opacity: 0;
      transform: translateY(24px);
      transition: opacity 0.6s ease, transform 0.6s ease;
    }
    .thesis-wide.visible { opacity: 1; transform: none; }
    .thesis-wide h3 {
      font-size: 14px;
      color: #E53E3E;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 14px;
    }
    .thesis-wide p {
      font-size: 13px;
      line-height: 1.7;
      color: #999999;
      margin-bottom: 10px;
    }
    .thesis-wide p:last-child { margin-bottom: 0; }
    .thesis-wide strong { color: #E8E0E0; }
    .thesis-wide .hl { color: #E53E3E; font-weight: 500; }
    .thesis-wide .gl { color: #68D391; font-weight: 500; }
    .thesis-wide .al { color: #F59E0B; font-weight: 500; }

    /* === Tables === */
    .val-table {
      width: 100%;
      border-collapse: collapse;
      margin: 16px 0 8px;
      font-size: 12px;
    }
    .val-table th {
      text-align: left;
      color: #666666;
      font-weight: 500;
      padding: 6px 10px;
      border-bottom: 1px solid #333333;
      text-transform: uppercase;
      letter-spacing: 0.3px;
      font-size: 10px;
    }
    .val-table td {
      padding: 8px 10px;
      border-bottom: 1px solid rgba(51,51,51,0.5);
      color: #999999;
    }
    .val-table td:nth-child(2), .val-table td:nth-child(3) { color: #E8E0E0; font-weight: 600; }
    .val-table tr:last-child td { border-bottom: none; }

    /* === Live Badge === */
    .live-badge {
      display: inline-block;
      font-size: 10px;
      padding: 3px 10px;
      border-radius: 20px;
      background: rgba(229,62,62,0.12);
      color: #E53E3E;
      font-weight: 600;
      letter-spacing: 0.3px;
      text-transform: uppercase;
      margin-left: 8px;
      animation: badge-pulse 2s ease-in-out infinite;
    }
    @keyframes badge-pulse {
      0%, 100% { box-shadow: 0 0 0 0 rgba(229,62,62,0.2); }
      50% { box-shadow: 0 0 12px 2px rgba(229,62,62,0.15); }
    }

    /* === Section Labels === */
    .section-group {
      max-width: 1200px;
      margin: 0 auto 48px;
    }
    .section-label {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 20px;
      padding: 0 4px;
    }
    .section-label h2 {
      font-size: 16px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.8px;
    }
    .section-label .count {
      font-size: 11px;
      color: #666666;
      font-weight: 500;
    }
    .section-label::after {
      content: '';
      flex: 1;
      height: 1px;
      background: #333333;
    }
    .section-label.kernel h2 { color: #E53E3E; }
    .section-label.domain h2 { color: #68D391; }
    .section-label.reference h2 { color: #C4A8A8; }
    .section-label.research h2 { color: #F59E0B; }
    .section-label.instrument h2 { color: #666666; }

    /* === Tags === */
    .tag {
      display: inline-block;
      font-size: 10px;
      padding: 2px 8px;
      border-radius: 4px;
      background: rgba(229,62,62,0.12);
      color: #F56565;
      margin-top: 4px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      font-weight: 500;
    }
    .tag-kernel { background: rgba(229,62,62,0.12); color: #F56565; }
    .tag-domain { background: rgba(104,211,145,0.12); color: #68D391; }
    .tag-reference { background: rgba(196,168,168,0.12); color: #C4A8A8; }
    .tag-research { background: rgba(245,158,11,0.12); color: #F59E0B; }
    .tag-instrument { background: rgba(102,102,102,0.12); color: #999999; }

    /* === Cards + Grid === */
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
      gap: 16px;
      max-width: 1200px;
      margin: 0 auto;
    }
    .card {
      display: flex;
      align-items: center;
      gap: 14px;
      padding: 16px 20px;
      background: #1A1A1A;
      border: 1px solid #333333;
      border-radius: 12px;
      text-decoration: none;
      color: #E8E0E0;
      position: relative;
      isolation: isolate;
      overflow: hidden;
      opacity: 0;
      transform: translateY(24px);
      transition: opacity 0.6s ease, transform 0.6s ease, background 0.2s ease, border-color 0.2s ease, box-shadow 0.2s ease;
    }
    .card.visible {
      opacity: 1;
      transform: none;
    }
    .card:hover {
      background: #222222;
      border-color: #444444;
      transform: translateY(-2px);
      box-shadow: 0 8px 24px rgba(0,0,0,0.4);
    }

    /* Hover Shimmer (Layer 5) */
    .card::before {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(105deg, transparent 40%, rgba(229,62,62,0.06) 50%, transparent 60%);
      transform: translateX(-100%);
      transition: transform 0.6s ease;
      z-index: -1;
      pointer-events: none;
    }
    .card:hover::before {
      transform: translateX(100%);
    }

    .icon { font-size: 28px; flex-shrink: 0; }
    .card-text h2 { font-size: 15px; font-weight: 600; }
    .card-text p { font-size: 12px; color: #666666; margin-top: 2px; }

    /* Card category borders */
    .card-kernel { border-color: rgba(229,62,62,0.25); }
    .card-kernel:hover { border-color: #E53E3E; box-shadow: 0 8px 24px rgba(229,62,62,0.15); }
    .card-domain { border-color: rgba(104,211,145,0.25); }
    .card-domain:hover { border-color: #68D391; box-shadow: 0 8px 24px rgba(104,211,145,0.15); }

    /* Dual-link cards (operation + brand book) */
    .card-duo { cursor: pointer; }
    .card-main { color: inherit; text-decoration: none; }
    .card-main::after {
      content: '';
      position: absolute;
      inset: 0;
      z-index: 1;
    }
    .card-brand {
      position: absolute;
      top: 8px;
      right: 8px;
      z-index: 2;
      font-size: 9px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      padding: 3px 8px;
      border-radius: 4px;
      background: rgba(104,211,145,0.1);
      color: #68D391;
      text-decoration: none;
      transition: background 0.2s, color 0.2s;
    }
    .card-brand:hover {
      background: rgba(104,211,145,0.25);
      color: #9AE6B4;
    }
    .card-research { border-color: rgba(245,158,11,0.25); }
    .card-research:hover { border-color: #F59E0B; box-shadow: 0 8px 24px rgba(245,158,11,0.15); }

    /* === Force Graph === */
    #force-graph {
      max-width: 1200px;
      margin: 0 auto 48px;
      text-align: center;
      opacity: 0;
      transform: translateY(24px);
      transition: opacity 0.8s ease, transform 0.8s ease;
    }
    #force-graph.visible { opacity: 1; transform: none; }
    .fg-header { margin-bottom: 24px; }
    .fg-header h2 {
      font-size: 18px;
      font-weight: 700;
      color: #E53E3E;
      text-transform: uppercase;
      letter-spacing: 0.8px;
      margin-bottom: 4px;
    }
    .fg-header p { font-size: 13px; color: #666666; }
    #fg-canvas {
      display: block;
      margin: 0 auto;
      cursor: grab;
      border-radius: 12px;
      background: #111;
      border: 1px solid #222;
    }
    #fg-canvas:active { cursor: grabbing; }
    #fg-tooltip {
      position: fixed;
      padding: 10px 16px;
      background: #1A1A1A;
      border: 1px solid #444;
      border-radius: 8px;
      color: #E8E0E0;
      font-size: 13px;
      font-weight: 500;
      font-family: 'Inter', sans-serif;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.15s;
      z-index: 100;
      white-space: nowrap;
    }
    #fg-tooltip.show { opacity: 1; }

    /* === Reduced Motion (Layer 6) === */
    @media (prefers-reduced-motion: reduce) {
      #web-bg { display: none !important; }
      #particle-canvas { display: none !important; }
      .card, .thesis-card, .thesis-wide, .abstract, .primitives-section, .primitive-card, #force-graph {
        opacity: 1 !important;
        transform: none !important;
        transition-duration: 0s !important;
        transition-delay: 0s !important;
      }
      .card::before { display: none !important; }
      .flow-arrow { animation: none !important; }
      .web-strands { animation: none !important; }
      .junction, .npulse { display: none !important; }
      .live-badge { animation: none !important; }
      .hero-overlay h1 {
        -webkit-text-fill-color: #E8E0E0;
        background: none;
      }
    }

    /* === Substrate Panels (Temporal + Spatial) === */
    .substrate-panel {
      max-width: 1200px;
      margin: 0 auto;
      max-height: 0;
      overflow: hidden;
      opacity: 0;
      transition: max-height 0.5s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.4s ease;
    }
    .substrate-panel.open { max-height: 700px; opacity: 1; }
    .substrate-cols { display: flex; gap: 24px; padding: 16px 4px; }
    .substrate-col { flex: 1; min-width: 0; }
    .substrate-title { font-size: 16px; font-weight: 700; color: #E8E0E0; margin-bottom: 4px; }
    .substrate-stats { font-size: 12px; color: #666; margin-bottom: 12px; }
    .substrate-desc { font-size: 13px; color: #999; line-height: 1.6; margin-bottom: 16px; }
    .substrate-fullview { font-size: 11px; color: #666; text-decoration: none; font-weight: 500; transition: color 0.2s; }
    .substrate-fullview:hover { color: #E53E3E; }
    .res-bar { height: 22px; display: flex; align-items: center; gap: 8px; margin-bottom: 2px; }
    .res-bar-fill { height: 12px; border-radius: 3px; min-width: 2px; opacity: 0.85; }
    .res-bar-label { font-size: 10px; color: #888; white-space: nowrap; width: 82px; text-align: right; }
    .res-bar-count { font-size: 10px; color: #555; margin-left: auto; white-space: nowrap; }
    .res-group-label { font-size: 9px; color: #444; text-transform: uppercase; letter-spacing: 1px; margin: 6px 0 2px 0; font-weight: 600; }
    .card-temporal, .card-spatial { cursor: pointer; }
    .card-temporal.active, .card-spatial.active { border-color: #E53E3E; box-shadow: 0 0 16px rgba(229,62,62,0.2); }
    .substrate-arrow { display: inline-block; font-size: 10px; margin-left: 4px; transition: transform 0.3s ease; }
    .card-temporal.active .substrate-arrow,
    .card-spatial.active .substrate-arrow { transform: rotate(180deg); }
    .region-legend { display: flex; flex-wrap: wrap; gap: 12px; margin-bottom: 16px; }
    .region-dot { display: flex; align-items: center; gap: 5px; font-size: 11px; color: #888; }
    .region-dot span { width: 8px; height: 8px; border-radius: 50%; display: inline-block; }
    .compass-svg { display: block; margin: 0 auto 16px; }
    .hierarchy-svg { display: block; margin: 0 auto; }

    /* === Mobile (Layer 6) === */
    @media (max-width: 700px) {
      #hero { height: auto; }
      #particle-canvas { display: none; }
      .hero-overlay {
        position: relative;
        padding: 48px 0 40px;
      }
      .hero-overlay h1 { font-size: 32px; letter-spacing: -1px; }
      .hero-overlay .subtitle { font-size: 13px; padding: 0 12px; }
      .primitives-diagram { display: none; }
      .primitives-grid { grid-template-columns: repeat(2, 1fr); }
      .thesis-grid { grid-template-columns: 1fr; }
      .thesis-wide { padding: 20px; }
      #kg-svg-container { height: 350px; }
      .kg-search { width: 140px; }
      .kg-header { gap: 8px; }
      .substrate-cols { flex-direction: column; }
      .substrate-panel.open { max-height: 1200px; }
    }
  </style>
</head>
<body>

<!-- ═══════════ LAYER 1: Neural Synapse Web Background ═══════════ -->
<div id="web-bg">
  <svg id="web-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240">
    <defs>
      <filter id="synapse-glow" x="-200%" y="-200%" width="500%" height="500%">
        <feGaussianBlur in="SourceGraphic" stdDeviation="4" result="blur"/>
        <feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge>
      </filter>
      <filter id="junction-fire" x="-200%" y="-200%" width="500%" height="500%">
        <feGaussianBlur in="SourceGraphic" stdDeviation="2" result="blur"/>
        <feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge>
      </filter>
    </defs>
    <g class="web-strands" transform="translate(120,120)" stroke="#E53E3E" stroke-width="1.5" fill="none" stroke-opacity="0.08" stroke-linecap="round" stroke-linejoin="round">
      <!-- 9 radial threads -->
      <line x1="0" y1="0" x2="0" y2="-108"/>
      <line x1="0" y1="0" x2="65" y2="-87"/>
      <line x1="0" y1="0" x2="103" y2="-33"/>
      <line x1="0" y1="0" x2="95" y2="50"/>
      <line x1="0" y1="0" x2="40" y2="100"/>
      <line x1="0" y1="0" x2="-40" y2="100"/>
      <line x1="0" y1="0" x2="-95" y2="50"/>
      <line x1="0" y1="0" x2="-103" y2="-33"/>
      <line x1="0" y1="0" x2="-65" y2="-87"/>
      <!-- Outer ring -->
      <path d="M 0,-108 Q 38,-105 65,-87 Q 92,-65 103,-33 Q 108,10 95,50 Q 78,82 40,100 Q 5,110 -40,100 Q -78,82 -95,50 Q -108,10 -103,-33 Q -92,-65 -65,-87 Q -38,-105 0,-108 Z"/>
      <!-- Middle ring -->
      <path d="M 0,-70 Q 24,-68 42,-56 Q 60,-42 67,-21 Q 70,7 62,32 Q 51,53 26,65 Q 3,72 -26,65 Q -51,53 -62,32 Q -70,7 -67,-21 Q -60,-42 -42,-56 Q -24,-68 0,-70 Z"/>
      <!-- Inner ring -->
      <path d="M 0,-38 Q 13,-37 23,-30 Q 33,-23 36,-11 Q 38,4 34,18 Q 28,29 14,35 Q 2,39 -14,35 Q -28,29 -34,18 Q -38,4 -36,-11 Q -33,-23 -23,-30 Q -13,-37 0,-38 Z"/>
    </g>
    <!-- 27 junction nodes at radial-ring intersections -->
    <g id="neural-junctions" transform="translate(120,120)">
      <!-- Outer ring junctions (0-8) -->
      <circle class="junction" cx="0" cy="-108" r="1.5" fill="#E53E3E" filter="url(#junction-fire)"/>
      <circle class="junction" cx="65" cy="-87" r="1.5" fill="#E53E3E" filter="url(#junction-fire)"/>
      <circle class="junction" cx="103" cy="-33" r="1.5" fill="#E53E3E" filter="url(#junction-fire)"/>
      <circle class="junction" cx="95" cy="50" r="1.5" fill="#E53E3E" filter="url(#junction-fire)"/>
      <circle class="junction" cx="40" cy="100" r="1.5" fill="#E53E3E" filter="url(#junction-fire)"/>
      <circle class="junction" cx="-40" cy="100" r="1.5" fill="#E53E3E" filter="url(#junction-fire)"/>
      <circle class="junction" cx="-95" cy="50" r="1.5" fill="#E53E3E" filter="url(#junction-fire)"/>
      <circle class="junction" cx="-103" cy="-33" r="1.5" fill="#E53E3E" filter="url(#junction-fire)"/>
      <circle class="junction" cx="-65" cy="-87" r="1.5" fill="#E53E3E" filter="url(#junction-fire)"/>
      <!-- Middle ring junctions (9-17) -->
      <circle class="junction" cx="0" cy="-70" r="1.5" fill="#E53E3E" filter="url(#junction-fire)"/>
      <circle class="junction" cx="42" cy="-56" r="1.5" fill="#E53E3E" filter="url(#junction-fire)"/>
      <circle class="junction" cx="67" cy="-21" r="1.5" fill="#E53E3E" filter="url(#junction-fire)"/>
      <circle class="junction" cx="62" cy="32" r="1.5" fill="#E53E3E" filter="url(#junction-fire)"/>
      <circle class="junction" cx="26" cy="65" r="1.5" fill="#E53E3E" filter="url(#junction-fire)"/>
      <circle class="junction" cx="-26" cy="65" r="1.5" fill="#E53E3E" filter="url(#junction-fire)"/>
      <circle class="junction" cx="-62" cy="32" r="1.5" fill="#E53E3E" filter="url(#junction-fire)"/>
      <circle class="junction" cx="-67" cy="-21" r="1.5" fill="#E53E3E" filter="url(#junction-fire)"/>
      <circle class="junction" cx="-42" cy="-56" r="1.5" fill="#E53E3E" filter="url(#junction-fire)"/>
      <!-- Inner ring junctions (18-26) -->
      <circle class="junction" cx="0" cy="-38" r="1.5" fill="#E53E3E" filter="url(#junction-fire)"/>
      <circle class="junction" cx="23" cy="-30" r="1.5" fill="#E53E3E" filter="url(#junction-fire)"/>
      <circle class="junction" cx="36" cy="-11" r="1.5" fill="#E53E3E" filter="url(#junction-fire)"/>
      <circle class="junction" cx="34" cy="18" r="1.5" fill="#E53E3E" filter="url(#junction-fire)"/>
      <circle class="junction" cx="14" cy="35" r="1.5" fill="#E53E3E" filter="url(#junction-fire)"/>
      <circle class="junction" cx="-14" cy="35" r="1.5" fill="#E53E3E" filter="url(#junction-fire)"/>
      <circle class="junction" cx="-34" cy="18" r="1.5" fill="#E53E3E" filter="url(#junction-fire)"/>
      <circle class="junction" cx="-36" cy="-11" r="1.5" fill="#E53E3E" filter="url(#junction-fire)"/>
      <circle class="junction" cx="-23" cy="-30" r="1.5" fill="#E53E3E" filter="url(#junction-fire)"/>
    </g>
    <!-- Neural pulse pool (12 signal circles) -->
    <g id="neural-pulses" transform="translate(120,120)">
      <circle class="npulse" r="2.5" fill="#E53E3E" opacity="0" filter="url(#synapse-glow)"/>
      <circle class="npulse" r="2.5" fill="#E53E3E" opacity="0" filter="url(#synapse-glow)"/>
      <circle class="npulse" r="2.5" fill="#E53E3E" opacity="0" filter="url(#synapse-glow)"/>
      <circle class="npulse" r="2.5" fill="#E53E3E" opacity="0" filter="url(#synapse-glow)"/>
      <circle class="npulse" r="2.5" fill="#E53E3E" opacity="0" filter="url(#synapse-glow)"/>
      <circle class="npulse" r="2.5" fill="#E53E3E" opacity="0" filter="url(#synapse-glow)"/>
      <circle class="npulse" r="2.5" fill="#E53E3E" opacity="0" filter="url(#synapse-glow)"/>
      <circle class="npulse" r="2.5" fill="#E53E3E" opacity="0" filter="url(#synapse-glow)"/>
      <circle class="npulse" r="2.5" fill="#E53E3E" opacity="0" filter="url(#synapse-glow)"/>
      <circle class="npulse" r="2.5" fill="#E53E3E" opacity="0" filter="url(#synapse-glow)"/>
      <circle class="npulse" r="2.5" fill="#E53E3E" opacity="0" filter="url(#synapse-glow)"/>
      <circle class="npulse" r="2.5" fill="#E53E3E" opacity="0" filter="url(#synapse-glow)"/>
    </g>
  </svg>
</div>

<!-- ═══════════ Passcode Gate ═══════════ -->
<div id="gate" style="
  position:fixed;inset:0;z-index:9999;
  background:#141414;
  display:flex;flex-direction:column;align-items:center;justify-content:center;
  font-family:'Inter',-apple-system,sans-serif;
  transition:opacity 0.5s;
">
  <div id="gate-logo" style="
    width:120px;height:120px;
    border-radius:24px;
    background:#1A1A1A;
    border:1px solid #333333;
    display:flex;align-items:center;justify-content:center;
    margin-bottom:32px;
    padding:20px;
  "><img src="design/brandbook/someai/assets/LOGO.png" alt="SomeAI" style="width:72px;height:72px;object-fit:contain;filter:brightness(0) saturate(100%) invert(27%) sepia(89%) saturate(1800%) hue-rotate(343deg) brightness(93%);"></div>
  <p style="color:#666666;font-size:13px;letter-spacing:2px;text-transform:uppercase;margin-bottom:24px;">Enter Access Code</p>
  <input id="gate-input" type="password" autocomplete="off" autofocus
    placeholder="&#x2022;&#x2022;&#x2022;&#x2022;&#x2022;&#x2022;&#x2022;"
    style="
      background:#1A1A1A;
      border:1px solid #333333;
      border-radius:12px;
      padding:14px 24px;
      font-size:18px;
      color:#E8E0E0;
      text-align:center;
      letter-spacing:4px;
      width:240px;
      outline:none;
      font-family:inherit;
      transition:border-color 0.2s;
    "
  >
  <p id="gate-error" style="color:#E53E3E;font-size:12px;margin-top:12px;opacity:0;transition:opacity 0.3s;">&nbsp;</p>
</div>

<script>
(function() {
  var PASSCODE = 'charles';
  var gate = document.getElementById('gate');
  var input = document.getElementById('gate-input');
  var error = document.getElementById('gate-error');

  if (sessionStorage.getItem('charles_auth') === '1') {
    gate.style.display = 'none';
  }

  input.addEventListener('keydown', function(e) {
    if (e.key === 'Enter') {
      if (input.value.toLowerCase().trim() === PASSCODE) {
        sessionStorage.setItem('charles_auth', '1');
        gate.style.opacity = '0';
        setTimeout(function() { gate.style.display = 'none'; }, 500);
      } else {
        input.value = '';
        input.style.borderColor = '#E53E3E';
        error.textContent = 'Invalid code';
        error.style.opacity = '1';
        setTimeout(function() {
          input.style.borderColor = '#333333';
          error.style.opacity = '0';
        }, 1500);
      }
    }
  });

  input.addEventListener('focus', function() { input.style.borderColor = '#444444'; });
  input.addEventListener('blur', function() { input.style.borderColor = '#333333'; });
})();
</script>

<!-- ═══════════ LAYER 2: Micro-Graph Background (full page) ═══════════ -->
<canvas id="particle-canvas"></canvas>

<!-- ═══════════ Hero Section ═══════════ -->
<section id="hero">
  <div class="hero-overlay">
    <h1>Charlotte</h1>
    <p class="subtitle">An operating system for operations &mdash; from research instruments to compiled instruction sets</p>
  </div>
</section>

<!-- ═══════════ Abstract ═══════════ -->
<div class="abstract">
  <h2>Abstract</h2>
  <p>
    <span class="highlight">Charlotte</span> is the first layer of an <strong>infinite stack of operating systems</strong>. Every business that wants to be a business gets its own OS &mdash; custom-compiled to its own operations, its own vocabulary, its own rhythm. A pig farm runs on a different instruction set than a violin dealer, which runs on a different instruction set than a moving company. But because every OS is built on top of Charlotte, they are all <strong>interoperable by construction</strong>. They can all talk to each other. They can all learn from each other. The kernel never changes.
  </p>
  <p>
    Charlotte is the universal layer: five primitives &mdash; <strong>Node, Edge, Metric, Signal, Protocol</strong> &mdash; and a temporal spine running from epoch to millisecond. The observer lives on this spine in Kd-space, placing signals on metric lines. Each domain OS stacked on top <strong>shrinks the convex hull</strong> of the knowledge space &mdash; restricting the vocabulary, tightening the instruction set, compiling a full end-to-end pipeline into the <strong>smallest possible encoding</strong> for that specific business. Layer 1 is universal. Layer N is bespoke. Every layer in between is just a tighter ontology.
  </p>
  <p>
    The result is not one product. It is an <strong>infinite number of products</strong> &mdash; each one custom, each one small enough to be invisible, each one powerful enough to run an entire operation &mdash; all stacked on the same kernel, all sharing the same temporal spine, all speaking the same language at the bottom. The correct measure of technological progress is not how much technology people use. It is <strong>how little they notice</strong>.
  </p>
</div>

<!-- ═══════════ LAYER 3: Five Primitives ═══════════ -->
<section class="primitives-section">
  <div class="primitives-header">
    <h2>Five Primitives</h2>
    <p>The universal kernel</p>
  </div>

  <div class="primitives-diagram">
    <svg viewBox="0 0 800 120" xmlns="http://www.w3.org/2000/svg" fill="none">
      <defs>
        <marker id="arrow-marker" viewBox="0 0 10 10" refX="10" refY="5" markerWidth="5" markerHeight="5" orient="auto">
          <path d="M 0 1 L 10 5 L 0 9 z" fill="#444"/>
        </marker>
      </defs>
      <!-- Flow arrows -->
      <line class="flow-arrow" x1="118" y1="60" x2="202" y2="60" stroke="#444" stroke-width="1.5" stroke-dasharray="6 4" marker-end="url(#arrow-marker)"/>
      <line class="flow-arrow" x1="278" y1="60" x2="362" y2="60" stroke="#444" stroke-width="1.5" stroke-dasharray="6 4" marker-end="url(#arrow-marker)"/>
      <line class="flow-arrow" x1="438" y1="60" x2="522" y2="60" stroke="#444" stroke-width="1.5" stroke-dasharray="6 4" marker-end="url(#arrow-marker)"/>
      <line class="flow-arrow" x1="598" y1="60" x2="682" y2="60" stroke="#444" stroke-width="1.5" stroke-dasharray="6 4" marker-end="url(#arrow-marker)"/>
      <!-- NODE -->
      <circle cx="80" cy="60" r="38" stroke="#C4A8A8" stroke-width="1.5"/>
      <text x="80" y="64" text-anchor="middle" fill="#C4A8A8" font-size="11" font-weight="600" font-family="Inter, sans-serif" letter-spacing="0.5">NODE</text>
      <!-- EDGE -->
      <circle cx="240" cy="60" r="38" stroke="#9B7878" stroke-width="1.5"/>
      <text x="240" y="64" text-anchor="middle" fill="#9B7878" font-size="11" font-weight="600" font-family="Inter, sans-serif" letter-spacing="0.5">EDGE</text>
      <!-- METRIC -->
      <circle cx="400" cy="60" r="38" stroke="#F59E0B" stroke-width="1.5"/>
      <text x="400" y="64" text-anchor="middle" fill="#F59E0B" font-size="11" font-weight="600" font-family="Inter, sans-serif" letter-spacing="0.5">METRIC</text>
      <!-- SIGNAL -->
      <circle cx="560" cy="60" r="38" stroke="#E53E3E" stroke-width="1.5"/>
      <text x="560" y="64" text-anchor="middle" fill="#E53E3E" font-size="11" font-weight="600" font-family="Inter, sans-serif" letter-spacing="0.5">SIGNAL</text>
      <!-- PROTOCOL -->
      <circle cx="720" cy="60" r="38" stroke="#68D391" stroke-width="1.5"/>
      <text x="720" y="64" text-anchor="middle" fill="#68D391" font-size="10" font-weight="600" font-family="Inter, sans-serif" letter-spacing="0.5">PROTOCOL</text>
    </svg>
  </div>

  <div class="primitives-grid">
    <div class="primitive-card">
      <div class="primitive-icon" style="color:#C4A8A8">&#x25CF;</div>
      <h3 style="color:#C4A8A8">Node</h3>
      <p>The identity. An observable entity that persists through time.</p>
    </div>
    <div class="primitive-card">
      <div class="primitive-icon" style="color:#9B7878">&#x2194;</div>
      <h3 style="color:#9B7878">Edge</h3>
      <p>The relationship. A typed connection between two nodes.</p>
    </div>
    <div class="primitive-card">
      <div class="primitive-icon" style="color:#F59E0B">&#x2261;</div>
      <h3 style="color:#F59E0B">Metric</h3>
      <p>The measure. A quantifiable dimension observed along.</p>
    </div>
    <div class="primitive-card">
      <div class="primitive-icon" style="color:#E53E3E">&#x26A1;</div>
      <h3 style="color:#E53E3E">Signal</h3>
      <p>The event. A timestamped observation emitted on a metric.</p>
    </div>
    <div class="primitive-card">
      <div class="primitive-icon" style="color:#68D391">&#x25C6;</div>
      <h3 style="color:#68D391">Protocol</h3>
      <p>The rule. A constraint governing signal propagation.</p>
    </div>
  </div>
</section>

<hr class="divider">

<!-- ═══════════ Investment Thesis ═══════════ -->
<div class="thesis">
  <div class="thesis-header">
    <h2>Where We Are Going</h2>
    <p class="tagline">Invisible infrastructure for the 33.2 million businesses technology forgot</p>
  </div>

  <div class="thesis-wide">
    <h3>The 97% Thesis</h3>
    <p>
      There are <strong>33.2 million small businesses</strong> in the United States. <span class="al">97% were built before AI existed.</span> Most predate broadband internet. Many predate the personal computer. These businesses &mdash; corner-store libraries, family coffee shops, third-generation hardware stores &mdash; do not need more technology. They need the complexity of modernity to <strong>stop eroding them</strong> while they do what they were built to do.
    </p>
    <p>
      Charlotte is <strong>titanium injected directly into the bone</strong>. The business does not change. The owner learns nothing new. No new screens. No new logins. No training. No migration. The substrate observes the signals the business already emits &mdash; transactions, schedules, inventory, deliveries &mdash; and converts them into structural intelligence. <span class="hl">Devices manage themselves. The infrastructure thinks so the owner doesn't have to.</span> The endgame is not a world with more technology everywhere. It is a world with <strong>less visible technology and more underlying intelligence</strong>.
    </p>
  </div>

  <div class="thesis-wide">
    <h3>First Revenue <span class="live-badge">Live Feb 23, 2026</span></h3>
    <p>
      The <strong>first industrial sector contract</strong> goes live February 23, 2026 &mdash; <span class="gl">$1.4M over 2 years</span> for Charlotte-powered equipment intelligence deployed into a major MRO platform across 42 locations. This is the PE beachhead &mdash; not the ceiling. Each deployment proves the substrate works across a new domain, reduces onboarding cost by 30&ndash;40%, and generates cross-client intelligence that makes every subsequent deployment faster. The pattern scales from PE portfolio companies (<span class="al">~26,000</span>) to mid-market (<span class="al">~200,000</span>) to the <strong>33 million businesses</strong> that have never had access to this kind of infrastructure and never should have needed to ask.
    </p>
  </div>

  <div class="thesis-grid">
    <div class="thesis-card">
      <h3 class="blue">The Research Lab</h3>
      <p>
        Every project on this page is a <strong>containerized instance</strong> &mdash; a game Charlotte facilitates. The lab has produced <strong>13 research papers</strong> across Nature, IEEE, ACM, NeurIPS, Cognitive Science, and Research Policy. Charlotte is validated across <strong>eight domains</strong>: industrial equipment, premium retail, manufacturing, livestock auctions, swine genetics, rare instruments, moving logistics, and marine ecosystems. The production dataset contains <span class="val-highlight blue">27,200 nodes</span> and <span class="val-highlight blue">46,100 edges</span>. Each domain proves that a single kernel can compile into a completely different operating system &mdash; different instruction sets, different rhythms, same five primitives underneath.
      </p>
    </div>
    <div class="thesis-card">
      <h3 class="green">Serengeti Oasis</h3>
      <p>
        The endgame is a purpose-built <strong>50&ndash;200 acre property</strong> where dozens of businesses run side-by-side, each on its own compiled OS, all stacked on Charlotte. A coffee shop, a veterinary clinic, a co-working space, a logistics hub &mdash; each with a different instruction set, different metrics, different protocols &mdash; all sharing the same temporal spine, all visible to each other. Having them co-located allows real-time analysis of <strong>resonance between operating systems</strong>: how fast signals propagate across business boundaries, where patterns compound, what emerges when bespoke systems talk to each other. The village is simultaneously a revenue-generating commercial district, a live research environment, and a <strong>proof that infinite bespoke OSes can interoperate on one kernel</strong>.
      </p>
    </div>
    <div class="thesis-card">
      <h3 class="amber">The Absorption Model</h3>
      <p>
        The technology industry built one-size-fits-all software for the <strong>3% of businesses born digital</strong>. Charlotte builds an infinite number of bespoke operating systems for the other 97%. Each business gets its own OS &mdash; compiled from its own signals, shrunk to its own instruction set &mdash; without knowing it exists. The <strong>adoption tax</strong> disappears because there is nothing to adopt. The infrastructure observes what the business already does and compiles itself around it. At <span class="val-highlight amber">1% penetration</span> of American small businesses paying $1K&ndash;$10K/month for invisible infrastructure, the market generates <span class="val-highlight amber">$6B ARR</span> &mdash; exceeding Palantir, Snowflake, and MongoDB.
      </p>
    </div>
    <div class="thesis-card">
      <h3 class="purple">The PE Beachhead</h3>
      <p>
        PE firms manage <strong>~26,000 portfolio companies</strong> &mdash; 0.08% of all businesses. Charlotte eliminates <strong>$770K&ndash;$3.4M/year in integration tax</strong> per company. Post-acquisition integration drops from 12&ndash;24 months to <strong>hours</strong>. The fund deploys the infrastructure; portfolio companies never know it is there. From this beachhead, the same substrate extends to the <strong>33 million businesses</strong> that have never adopted enterprise software and never will. <strong>LTV:CAC exceeds 50:1.</strong> Churn is &lt;5% &mdash; not because switching is hard, but because there is nothing to switch from. The infrastructure is invisible. You cannot abandon what you never noticed.
      </p>
    </div>
  </div>

  <div class="thesis-wide">
    <h3>Revenue Model: Three Layers</h3>
    <table class="val-table">
      <tr><th>Layer</th><th>Market</th><th>Price Point</th><th>1% Penetration ARR</th></tr>
      <tr>
        <td style="color:#C4A8A8;font-weight:600">PE Beachhead</td>
        <td>~26,000 portfolio companies</td>
        <td>$100K+/mo</td>
        <td style="color:#C4A8A8">$312M</td>
      </tr>
      <tr>
        <td style="color:#F56565;font-weight:600">Mid-Market Expansion</td>
        <td>~200,000 companies ($10M&ndash;$1B rev)</td>
        <td>$5K&ndash;$50K/mo</td>
        <td style="color:#F56565">$780M</td>
      </tr>
      <tr>
        <td style="color:#F59E0B;font-weight:600">The 97% &mdash; Small Business America</td>
        <td>33,200,000 businesses</td>
        <td>$500&ndash;$3K/mo (invisible)</td>
        <td style="color:#F59E0B">$6.0B</td>
      </tr>
      <tr style="border-top:1px solid #333333">
        <td style="color:#68D391;font-weight:700">Combined (1% penetration)</td>
        <td></td>
        <td></td>
        <td style="color:#68D391;font-weight:700">$7.1B</td>
      </tr>
    </table>
    <p style="margin-top:14px">
      The 97% layer is the paradigm shift. These businesses do not buy software. They never have. Charlotte does not ask them to. The substrate observes what they already do and makes it legible &mdash; <strong>no screens, no logins, no training</strong>. At 1% penetration with invisible infrastructure pricing, the small business layer alone generates more ARR than Palantir's entire 2025 revenue.
    </p>
  </div>

  <div class="thesis-wide">
    <h3>Forecasted Valuation</h3>
    <p>
      Grounded in comparable company analysis against <strong>Palantir</strong> ($324B, 48&ndash;96x P/S), <strong>Databricks</strong> ($134B, 28x ARR), <strong>Snowflake</strong> ($75B, 12&ndash;17x), <strong>MongoDB</strong> ($34B), <strong>Toast</strong> ($20B), and <strong>Samsara</strong> ($14.5B). Charlotte's trajectory reflects a category-creating infrastructure company targeting the largest untapped market in enterprise technology &mdash; the 33 million businesses the industry has never served.
    </p>
    <table class="val-table">
      <tr><th></th><th>Year 5</th><th>Year 10</th><th>Basis</th></tr>
      <tr>
        <td>Revenue (ARR)</td>
        <td style="color:#68D391">$82M &ndash; $108M</td>
        <td style="color:#68D391">$920M &ndash; $1.2B</td>
        <td>PE + mid-market clusters &middot; 900&ndash;11K businesses</td>
      </tr>
      <tr>
        <td>97% Layer (additive)</td>
        <td style="color:#F59E0B">$0 &ndash; $500M</td>
        <td style="color:#F59E0B">$1B &ndash; $6B</td>
        <td>0.1%&ndash;1% small business penetration as absorption model scales</td>
      </tr>
      <tr>
        <td>Gross Margin</td>
        <td>74%</td>
        <td>85%+</td>
        <td>No onboarding, no training, no support tickets &mdash; pure observation</td>
      </tr>
      <tr>
        <td style="color:#F56565;font-weight:600">Low-End Valuation</td>
        <td style="color:#F56565;font-weight:700">$750M &ndash; $1.5B</td>
        <td style="color:#F56565;font-weight:700">$4B &ndash; $16B</td>
        <td>15&ndash;25x ARR &middot; PE + mid-market only</td>
      </tr>
      <tr>
        <td style="color:#C4A8A8;font-weight:600">High-End Valuation</td>
        <td style="color:#C4A8A8;font-weight:700">$3B &ndash; $6B</td>
        <td style="color:#C4A8A8;font-weight:700">$25B &ndash; $50B+</td>
        <td>30&ndash;50x ARR &middot; With 97% layer &middot; Category creation premium</td>
      </tr>
    </table>
    <p style="margin-top:14px">
      <strong>Pre-revenue seed valuation (today):</strong> <span class="hl">$25M&ndash;$50M</span> with PE network access. <span class="hl">$50M&ndash;$100M</span> with signed property LOI. The structural moat is not code &mdash; it is <strong>8 years of cross-domain research, 13 papers across 13 venues, 5 architectural innovations no competitor has replicated, and a substrate that serves 33.2 million businesses without asking a single one to change</strong>. The correct measure of technological progress is not how much technology people use. It is how little they notice.
    </p>
  </div>
</div>

<hr class="divider">

<!-- ═══════════ FORCE GRAPH: Project Constellation ═══════════ -->
<section id="force-graph">
  <div class="fg-header">
    <h2>Project Constellation</h2>
    <p>SomeAI at center &mdash; drag to explore, click any node to navigate</p>
  </div>
  <canvas id="fg-canvas"></canvas>
</section>
<div id="fg-tooltip"></div>

<hr class="divider">

<!-- ═══════════ KERNEL & INFRASTRUCTURE ═══════════ -->
<div class="section-group">
  <div class="section-label kernel"><h2>Kernel &amp; Infrastructure</h2><span class="count">11 modules</span></div>
  <div class="grid">
    <a class="card card-kernel" href="research-lab/">
      <span class="icon">&#x1F9E0;</span>
      <div class="card-text"><h2>Research Lab</h2><p>The entire project as a knowledge graph</p><span class="tag tag-kernel">Meta</span></div>
    </a>
    <a class="card card-kernel" href="knowledge-graph/">
      <span class="icon">&#x1F4DA;</span>
      <div class="card-text"><h2>Knowledge Graph</h2><p>Consolidated research library &mdash; every resource, document &amp; project</p><span class="tag tag-kernel">Library</span></div>
    </a>
    <a class="card card-kernel" href="charlotte-os/">
      <span class="icon">&#x2699;</span>
      <div class="card-text"><h2>Charlotte OS</h2><p>Boot image &mdash; 31 KRF fact stacks in first-order logic</p><span class="tag tag-kernel">Kernel</span></div>
    </a>
    <a class="card card-kernel" href="charlotte/temporal/">
      <span class="icon">&#x1F553;</span>
      <div class="card-text"><h2>Temporal Spine</h2><p>15 granularity lanes from Millennium to Hour &mdash; 22.6M nodes, 4 compass directions, 1,123 lines KRF</p><span class="tag tag-kernel">Substrate</span></div>
    </a>
    <a class="card card-kernel" href="charlotte/spatial/">
      <span class="icon">&#x1F5FA;</span>
      <div class="card-text"><h2>Spatial Substrate</h2><p>51 state nodes, 1,275 directional edges &mdash; convex hulls, centroids, 4,604 lines KRF</p><span class="tag tag-kernel">Substrate</span></div>
    </a>
    <a class="card card-kernel" href="workbench/">
      <span class="icon">&#x1F3A8;</span>
      <div class="card-text"><h2>Workbench</h2><p>Asset studio &mdash; Lottie, SVG &amp; design assets across all entities</p><span class="tag tag-kernel">Studio</span></div>
    </a>
    <a class="card card-kernel" href="tools/pitch-engine/">
      <span class="icon">&#x1F4CA;</span>
      <div class="card-text"><h2>Pitch Engine</h2><p>Presentation substrate &mdash; 21 widgets, 5 narrative arcs, deck generation</p><span class="tag tag-kernel">Studio</span></div>
    </a>
    <a class="card card-kernel" href="tools/pitch-engine/decks/">
      <span class="icon">&#x1F4BD;</span>
      <div class="card-text"><h2>Pitch Decks</h2><p>8 businesses &times; 3 narratives &mdash; before/after Charlotte, gradient AI-centric slides</p><span class="tag tag-kernel">Studio</span></div>
    </a>
    <a class="card card-kernel" href="charlotte/charts/showcase/">
      <span class="icon">&#x1F4C9;</span>
      <div class="card-text"><h2>Charlotte Charts</h2><p>Chart library v3.3 &mdash; 34 types, 6 brand themes, mobile-first, zero dependencies</p><span class="tag tag-kernel">Library</span></div>
    </a>
    <a class="card card-kernel" href="papers/">
      <span class="icon">&#x1F4C4;</span>
      <div class="card-text"><h2>Research Papers</h2><p>13 draft papers across 13 venues &mdash; Nature to NeurIPS</p><span class="tag tag-research">Research</span></div>
    </a>
    <a class="card card-kernel" href="business/forecast.html">
      <span class="icon">&#x1F4C8;</span>
      <div class="card-text"><h2>Pipeline &amp; Forecast</h2><p>Series A materials &mdash; 9-entity pipeline, $2.4M MSAs, 5yr trajectory to $8.2M ARR</p><span class="tag tag-kernel">Business</span></div>
    </a>
    <a class="card card-kernel" href="charlotte/docs/artifacts/business_model.krf">
      <span class="icon">&#x1F4BE;</span>
      <div class="card-text"><h2>Business Model KRF</h2><p>Revenue model in Charlotte primitives &mdash; NODEs, EDGEs, METRICs, PROTOCOLs for the entire pipeline</p><span class="tag tag-kernel">Substrate</span></div>
    </a>
  </div>


  <!-- Inline Temporal Spine Panel -->
  <div id="temporal-panel" class="substrate-panel">
    <div class="substrate-cols">
      <div class="substrate-col">
        <div class="substrate-title">Temporal Spine</div>
        <div class="substrate-stats">15 granularity levels &middot; 22.6M nodes &middot; 4 compass directions</div>
        <p class="substrate-desc">The temporal substrate decomposes all of time into a navigable hierarchy &mdash; from Millennium down to Hour. Every node in Charlotte exists on this spine. The four compass directions (Coarser, Finer, Earlier, Later) let any observer move through time at any resolution. Each level contains every instance of that granularity from epoch to present.</p>
        <div class="res-group-label">Macro</div>
        <div class="res-bar"><span class="res-bar-label">Millennium</span><div class="res-bar-fill" style="width:6px;background:#E53E3E"></div><span class="res-bar-count">3</span></div>
        <div class="res-bar"><span class="res-bar-label">Century</span><div class="res-bar-fill" style="width:10px;background:#F56565"></div><span class="res-bar-count">21</span></div>
        <div class="res-bar"><span class="res-bar-label">Decade</span><div class="res-bar-fill" style="width:18px;background:#F59E0B"></div><span class="res-bar-count">204</span></div>
        <div class="res-group-label">Annual</div>
        <div class="res-bar"><span class="res-bar-label">Year</span><div class="res-bar-fill" style="width:30px;background:#68D391"></div><span class="res-bar-count">2,026</span></div>
        <div class="res-bar"><span class="res-bar-label">HalfYear</span><div class="res-bar-fill" style="width:34px;background:#34D399"></div><span class="res-bar-count">4,052</span></div>
        <div class="res-bar"><span class="res-bar-label">Trimester</span><div class="res-bar-fill" style="width:38px;background:#2DD4BF"></div><span class="res-bar-count">6,078</span></div>
        <div class="res-group-label">Periodic</div>
        <div class="res-bar"><span class="res-bar-label">Quarter</span><div class="res-bar-fill" style="width:40px;background:#4A9EE5"></div><span class="res-bar-count">8,104</span></div>
        <div class="res-bar"><span class="res-bar-label">Month</span><div class="res-bar-fill" style="width:52px;background:#A855F7"></div><span class="res-bar-count">24,312</span></div>
        <div class="res-bar"><span class="res-bar-label">Week</span><div class="res-bar-fill" style="width:70px;background:#EC4899"></div><span class="res-bar-count">105,664</span></div>
        <div class="res-group-label">Daily</div>
        <div class="res-bar"><span class="res-bar-label">Day</span><div class="res-bar-fill" style="width:95px;background:#F56565"></div><span class="res-bar-count">739,649</span></div>
        <div class="res-bar"><span class="res-bar-label">HalfDay</span><div class="res-bar-fill" style="width:105px;background:#FB923C"></div><span class="res-bar-count">1,479,298</span></div>
        <div class="res-bar"><span class="res-bar-label">Shift</span><div class="res-bar-fill" style="width:115px;background:#F59E0B"></div><span class="res-bar-count">2,218,947</span></div>
        <div class="res-bar"><span class="res-bar-label">Hour</span><div class="res-bar-fill" style="width:140px;background:#E53E3E"></div><span class="res-bar-count">17,751,576</span></div>
        <div style="margin-top:12px"><a class="substrate-fullview" href="charlotte/temporal/">Full View &rarr;</a></div>
      </div>
      <div class="substrate-col" style="max-width:280px">
        <!-- Temporal Compass -->
        <svg class="compass-svg" viewBox="0 0 160 160" width="150" height="150" xmlns="http://www.w3.org/2000/svg">
          <circle cx="80" cy="80" r="55" fill="none" stroke="#333" stroke-width="1"/>
          <circle cx="80" cy="80" r="3" fill="#E53E3E"/>
          <!-- Coarser (up) -->
          <line x1="80" y1="80" x2="80" y2="30" stroke="#E53E3E" stroke-width="1.5" stroke-linecap="round"/>
          <polygon points="80,22 76,32 84,32" fill="#E53E3E"/>
          <text x="80" y="16" text-anchor="middle" fill="#E8E0E0" font-size="9" font-family="Inter,sans-serif" font-weight="600">COARSER</text>
          <!-- Finer (down) -->
          <line x1="80" y1="80" x2="80" y2="130" stroke="#68D391" stroke-width="1.5" stroke-linecap="round"/>
          <polygon points="80,138 76,128 84,128" fill="#68D391"/>
          <text x="80" y="152" text-anchor="middle" fill="#68D391" font-size="9" font-family="Inter,sans-serif" font-weight="600">FINER</text>
          <!-- Earlier (left) -->
          <line x1="80" y1="80" x2="30" y2="80" stroke="#4A9EE5" stroke-width="1.5" stroke-linecap="round"/>
          <polygon points="22,80 32,76 32,84" fill="#4A9EE5"/>
          <text x="10" y="72" text-anchor="middle" fill="#4A9EE5" font-size="8" font-family="Inter,sans-serif" font-weight="600">EARLIER</text>
          <!-- Later (right) -->
          <line x1="80" y1="80" x2="130" y2="80" stroke="#F59E0B" stroke-width="1.5" stroke-linecap="round"/>
          <polygon points="138,80 128,76 128,84" fill="#F59E0B"/>
          <text x="150" y="72" text-anchor="middle" fill="#F59E0B" font-size="8" font-family="Inter,sans-serif" font-weight="600">LATER</text>
        </svg>
        <!-- Hierarchy Diagram -->
        <svg class="hierarchy-svg" viewBox="0 0 240 280" width="240" height="280" xmlns="http://www.w3.org/2000/svg">
          <style>
            .h-node { fill: #1A1A1A; stroke: #444; stroke-width: 1; }
            .h-text { fill: #999; font-size: 8px; font-family: Inter,sans-serif; text-anchor: middle; font-weight: 500; }
            .h-text-active { fill: #E8E0E0; }
            .h-line { stroke: #333; stroke-width: 1; fill: none; }
            .h-group { fill: #444; font-size: 7px; font-family: Inter,sans-serif; text-transform: uppercase; letter-spacing: 1px; }
          </style>
          <!-- Group labels -->
          <text class="h-group" x="8" y="20">MACRO</text>
          <text class="h-group" x="8" y="90">ANNUAL</text>
          <text class="h-group" x="8" y="160">PERIODIC</text>
          <text class="h-group" x="8" y="230">DAILY</text>
          <!-- Millennium -->
          <rect class="h-node" x="90" y="10" width="60" height="18" rx="4"/>
          <text class="h-text h-text-active" x="120" y="22">Millennium</text>
          <!-- Century -->
          <line class="h-line" x1="120" y1="28" x2="120" y2="40"/>
          <rect class="h-node" x="90" y="40" width="60" height="18" rx="4"/>
          <text class="h-text h-text-active" x="120" y="52">Century</text>
          <!-- Decade -->
          <line class="h-line" x1="120" y1="58" x2="120" y2="70"/>
          <rect class="h-node" x="90" y="70" width="60" height="18" rx="4"/>
          <text class="h-text h-text-active" x="120" y="82">Decade</text>
          <!-- Year -->
          <line class="h-line" x1="120" y1="88" x2="120" y2="100"/>
          <rect class="h-node" x="90" y="100" width="60" height="18" rx="4" style="stroke:#68D391"/>
          <text class="h-text h-text-active" x="120" y="112">Year</text>
          <!-- Branch: HalfYear + Trimester -->
          <line class="h-line" x1="120" y1="118" x2="70" y2="130"/>
          <line class="h-line" x1="120" y1="118" x2="170" y2="130"/>
          <rect class="h-node" x="40" y="130" width="60" height="18" rx="4"/>
          <text class="h-text" x="70" y="142">HalfYear</text>
          <rect class="h-node" x="140" y="130" width="60" height="18" rx="4"/>
          <text class="h-text" x="170" y="142">Trimester</text>
          <!-- Converge to Month -->
          <line class="h-line" x1="70" y1="148" x2="120" y2="160"/>
          <line class="h-line" x1="170" y1="148" x2="120" y2="160"/>
          <rect class="h-node" x="90" y="160" width="60" height="18" rx="4" style="stroke:#A855F7"/>
          <text class="h-text h-text-active" x="120" y="172">Month</text>
          <!-- Week -->
          <line class="h-line" x1="120" y1="178" x2="120" y2="190"/>
          <rect class="h-node" x="90" y="190" width="60" height="18" rx="4"/>
          <text class="h-text" x="120" y="202">Week</text>
          <!-- Day -->
          <line class="h-line" x1="120" y1="208" x2="120" y2="220"/>
          <rect class="h-node" x="90" y="220" width="60" height="18" rx="4" style="stroke:#F56565"/>
          <text class="h-text h-text-active" x="120" y="232">Day</text>
          <!-- Branch: HalfDay + Shift -->
          <line class="h-line" x1="120" y1="238" x2="70" y2="248"/>
          <line class="h-line" x1="120" y1="238" x2="170" y2="248"/>
          <rect class="h-node" x="40" y="248" width="60" height="18" rx="4"/>
          <text class="h-text" x="70" y="260">HalfDay</text>
          <rect class="h-node" x="140" y="248" width="60" height="18" rx="4"/>
          <text class="h-text" x="170" y="260">Shift</text>
        </svg>
      </div>
    </div>
  </div>

  <!-- Inline Spatial Substrate Panel -->
  <div id="spatial-panel" class="substrate-panel">
    <div class="substrate-cols">
      <div class="substrate-col">
        <div class="substrate-title">Spatial Substrate</div>
        <div class="substrate-stats">51 states &middot; 1,275 edges &middot; 8 directions &middot; 5 regions</div>
        <p class="substrate-desc">The spatial substrate maps all 50 US states plus DC as a directional graph. Every state connects to its neighbors along 8 cardinal/intercardinal directions (N, NE, E, SE, S, SW, W, NW). Five geographic regions provide clustering. Combined with the temporal spine, this gives Charlotte a complete spatiotemporal coordinate system for placing any signal.</p>
        <div class="region-legend">
          <div class="region-dot"><span style="background:#4A9EE5"></span>West (13)</div>
          <div class="region-dot"><span style="background:#68D391"></span>Midwest (12)</div>
          <div class="region-dot"><span style="background:#A855F7"></span>Northeast (9)</div>
          <div class="region-dot"><span style="background:#F56565"></span>Southeast (12)</div>
          <div class="region-dot"><span style="background:#F59E0B"></span>Southwest (5)</div>
        </div>
        <a class="substrate-fullview" href="charlotte/spatial/">Full View &rarr;</a>
      </div>
      <div class="substrate-col" style="max-width:420px">
        <!-- Spatial Compass -->
        <svg class="compass-svg" viewBox="0 0 160 160" width="130" height="130" xmlns="http://www.w3.org/2000/svg">
          <circle cx="80" cy="80" r="55" fill="none" stroke="#333" stroke-width="1"/>
          <circle cx="80" cy="80" r="3" fill="#E53E3E"/>
          <!-- N --><line x1="80" y1="80" x2="80" y2="30" stroke="#E53E3E" stroke-width="1.5" stroke-linecap="round"/><polygon points="80,23 77,31 83,31" fill="#E53E3E"/><text x="80" y="17" text-anchor="middle" fill="#E8E0E0" font-size="8" font-family="Inter,sans-serif" font-weight="600">N</text>
          <!-- S --><line x1="80" y1="80" x2="80" y2="130" stroke="#E53E3E" stroke-width="1.5" stroke-linecap="round"/><polygon points="80,137 77,129 83,129" fill="#E53E3E"/><text x="80" y="150" text-anchor="middle" fill="#E8E0E0" font-size="8" font-family="Inter,sans-serif" font-weight="600">S</text>
          <!-- E --><line x1="80" y1="80" x2="130" y2="80" stroke="#E53E3E" stroke-width="1.5" stroke-linecap="round"/><polygon points="137,80 129,77 129,83" fill="#E53E3E"/><text x="148" y="83" text-anchor="middle" fill="#E8E0E0" font-size="8" font-family="Inter,sans-serif" font-weight="600">E</text>
          <!-- W --><line x1="80" y1="80" x2="30" y2="80" stroke="#E53E3E" stroke-width="1.5" stroke-linecap="round"/><polygon points="23,80 31,77 31,83" fill="#E53E3E"/><text x="12" y="83" text-anchor="middle" fill="#E8E0E0" font-size="8" font-family="Inter,sans-serif" font-weight="600">W</text>
          <!-- NE --><line x1="80" y1="80" x2="115" y2="45" stroke="#666" stroke-width="1" stroke-linecap="round"/><text x="124" y="40" text-anchor="middle" fill="#666" font-size="7" font-family="Inter,sans-serif">NE</text>
          <!-- SE --><line x1="80" y1="80" x2="115" y2="115" stroke="#666" stroke-width="1" stroke-linecap="round"/><text x="124" y="122" text-anchor="middle" fill="#666" font-size="7" font-family="Inter,sans-serif">SE</text>
          <!-- SW --><line x1="80" y1="80" x2="45" y2="115" stroke="#666" stroke-width="1" stroke-linecap="round"/><text x="36" y="122" text-anchor="middle" fill="#666" font-size="7" font-family="Inter,sans-serif">SW</text>
          <!-- NW --><line x1="80" y1="80" x2="45" y2="45" stroke="#666" stroke-width="1" stroke-linecap="round"/><text x="36" y="40" text-anchor="middle" fill="#666" font-size="7" font-family="Inter,sans-serif">NW</text>
        </svg>
        <!-- Mini US Map: 51 state dots at approximate centroids, colored by region -->
        <svg id="us-mini-map" viewBox="-130 22 68 32" width="100%" height="auto" xmlns="http://www.w3.org/2000/svg" style="max-height:300px">
          <style>
            .st-dot { r: 0.6; opacity: 0.85; }
            .st-dot:hover { r: 1; opacity: 1; }
            .st-edge { stroke: #333; stroke-width: 0.15; opacity: 0.3; }
            .st-label { font-size: 1.2px; fill: #666; font-family: Inter,sans-serif; text-anchor: middle; pointer-events: none; }
          </style>
          <!-- Region hull outlines -->
          <polygon points="-124,42 -124,33 -117,33 -111,37 -104,35 -104,42 -109,47 -118,49 -122,48" fill="none" stroke="rgba(74,158,229,0.15)" stroke-width="0.3"/>
          <polygon points="-104,37 -97,37 -90,37 -87,39 -87,44 -93,44 -100,44 -104,42" fill="none" stroke="rgba(104,211,145,0.15)" stroke-width="0.3"/>
          <polygon points="-76,39 -70,39 -67,40 -67,43 -72,43 -76,42" fill="none" stroke="rgba(168,85,247,0.15)" stroke-width="0.3"/>
          <polygon points="-92,44 -82,43 -76,43 -76,47 -80,50 -86,50 -92,47" fill="none" stroke="rgba(245,101,101,0.15)" stroke-width="0.3"/>
          <polygon points="-112,44 -106,44 -100,46 -100,49 -109,49 -112,47" fill="none" stroke="rgba(245,158,11,0.15)" stroke-width="0.3"/>
          <!-- Representative adjacency edges -->
          <line class="st-edge" x1="-122.5" y1="37" x2="-117" y2="37"/>
          <line class="st-edge" x1="-117" y1="37" x2="-111.5" y2="40"/>
          <line class="st-edge" x1="-104" y1="40" x2="-100" y2="40"/>
          <line class="st-edge" x1="-100" y1="40" x2="-96" y2="39"/>
          <line class="st-edge" x1="-96" y1="39" x2="-93" y2="41"/>
          <line class="st-edge" x1="-93" y1="41" x2="-90" y2="42"/>
          <line class="st-edge" x1="-90" y1="42" x2="-87" y2="41"/>
          <line class="st-edge" x1="-87" y1="41" x2="-84" y2="40"/>
          <line class="st-edge" x1="-84" y1="40" x2="-80" y2="41"/>
          <line class="st-edge" x1="-80" y1="41" x2="-76" y2="41"/>
          <line class="st-edge" x1="-76" y1="41" x2="-73" y2="41"/>
          <line class="st-edge" x1="-73" y1="41" x2="-71" y2="42"/>
          <line class="st-edge" x1="-96" y1="44" x2="-93" y2="44"/>
          <line class="st-edge" x1="-90" y1="45" x2="-87" y2="44"/>
          <line class="st-edge" x1="-84" y1="44" x2="-80" y2="46"/>
          <!-- West (blue) -->
          <circle class="st-dot" cx="-122.5" cy="37" fill="#4A9EE5"/><text class="st-label" x="-122.5" y="35.5">WA</text>
          <circle class="st-dot" cx="-122.5" cy="40" fill="#4A9EE5"/><text class="st-label" x="-122.5" y="38.5">OR</text>
          <circle class="st-dot" cx="-121" cy="44" fill="#4A9EE5"/><text class="st-label" x="-121" y="42.5">CA</text>
          <circle class="st-dot" cx="-119" cy="47" fill="#4A9EE5"/><text class="st-label" x="-119" y="48.5">HI</text>
          <circle class="st-dot" cx="-126" cy="33" fill="#4A9EE5"/><text class="st-label" x="-126" y="31.5">AK</text>
          <circle class="st-dot" cx="-117" cy="37" fill="#4A9EE5"/><text class="st-label" x="-117" y="35.5">ID</text>
          <circle class="st-dot" cx="-115" cy="40" fill="#4A9EE5"/><text class="st-label" x="-115" y="38.5">NV</text>
          <circle class="st-dot" cx="-113" cy="44" fill="#4A9EE5"/><text class="st-label" x="-113" y="42.5">UT</text>
          <circle class="st-dot" cx="-111.5" cy="40" fill="#4A9EE5"/><text class="st-label" x="-111.5" y="38.5">MT</text>
          <circle class="st-dot" cx="-109" cy="37" fill="#4A9EE5"/><text class="st-label" x="-109" y="35.5">WY</text>
          <circle class="st-dot" cx="-108" cy="41" fill="#4A9EE5"/><text class="st-label" x="-108" y="39.5">CO</text>
          <circle class="st-dot" cx="-116" cy="34" fill="#4A9EE5"/><text class="st-label" x="-116" y="32.5">WA</text>
          <!-- Midwest (green) -->
          <circle class="st-dot" cx="-104" cy="37" fill="#68D391"/><text class="st-label" x="-104" y="35.5">ND</text>
          <circle class="st-dot" cx="-104" cy="39" fill="#68D391"/><text class="st-label" x="-104" y="37.5">SD</text>
          <circle class="st-dot" cx="-103" cy="41" fill="#68D391"/><text class="st-label" x="-103" y="39.5">NE</text>
          <circle class="st-dot" cx="-101" cy="43" fill="#68D391"/><text class="st-label" x="-101" y="41.5">KS</text>
          <circle class="st-dot" cx="-100" cy="40" fill="#68D391"/><text class="st-label" x="-100" y="38.5">MN</text>
          <circle class="st-dot" cx="-96" cy="39" fill="#68D391"/><text class="st-label" x="-96" y="37.5">WI</text>
          <circle class="st-dot" cx="-96" cy="41" fill="#68D391"/><text class="st-label" x="-96" y="42.5">IA</text>
          <circle class="st-dot" cx="-96" cy="44" fill="#68D391"/><text class="st-label" x="-96" y="45.5">MO</text>
          <circle class="st-dot" cx="-93" cy="41" fill="#68D391"/><text class="st-label" x="-93" y="39.5">IL</text>
          <circle class="st-dot" cx="-90" cy="40" fill="#68D391"/><text class="st-label" x="-90" y="38.5">MI</text>
          <circle class="st-dot" cx="-90" cy="42" fill="#68D391"/><text class="st-label" x="-90" y="43.5">IN</text>
          <circle class="st-dot" cx="-87" cy="41" fill="#68D391"/><text class="st-label" x="-87" y="39.5">OH</text>
          <!-- Northeast (purple) -->
          <circle class="st-dot" cx="-84" cy="40" fill="#A855F7"/><text class="st-label" x="-84" y="38.5">PA</text>
          <circle class="st-dot" cx="-80" cy="41" fill="#A855F7"/><text class="st-label" x="-80" y="39.5">NJ</text>
          <circle class="st-dot" cx="-78" cy="39" fill="#A855F7"/><text class="st-label" x="-78" y="37.5">NY</text>
          <circle class="st-dot" cx="-76" cy="41" fill="#A855F7"/><text class="st-label" x="-76" y="39.5">CT</text>
          <circle class="st-dot" cx="-74" cy="40" fill="#A855F7"/><text class="st-label" x="-74" y="38.5">RI</text>
          <circle class="st-dot" cx="-73" cy="39" fill="#A855F7"/><text class="st-label" x="-73" y="37.5">MA</text>
          <circle class="st-dot" cx="-72" cy="37.5" fill="#A855F7"/><text class="st-label" x="-72" y="36">VT</text>
          <circle class="st-dot" cx="-70" cy="37.5" fill="#A855F7"/><text class="st-label" x="-70" y="36">NH</text>
          <circle class="st-dot" cx="-68" cy="37" fill="#A855F7"/><text class="st-label" x="-68" y="35.5">ME</text>
          <!-- Southeast (red) -->
          <circle class="st-dot" cx="-87" cy="44" fill="#F56565"/><text class="st-label" x="-87" y="45.5">KY</text>
          <circle class="st-dot" cx="-84" cy="44" fill="#F56565"/><text class="st-label" x="-84" y="45.5">WV</text>
          <circle class="st-dot" cx="-82" cy="43" fill="#F56565"/><text class="st-label" x="-82" y="44.5">VA</text>
          <circle class="st-dot" cx="-80" cy="44.5" fill="#F56565"/><text class="st-label" x="-80" y="46">NC</text>
          <circle class="st-dot" cx="-80" cy="47" fill="#F56565"/><text class="st-label" x="-80" y="48.5">SC</text>
          <circle class="st-dot" cx="-82" cy="49" fill="#F56565"/><text class="st-label" x="-82" y="50.5">GA</text>
          <circle class="st-dot" cx="-83" cy="51" fill="#F56565"/><text class="st-label" x="-83" y="52.5">FL</text>
          <circle class="st-dot" cx="-90" cy="45" fill="#F56565"/><text class="st-label" x="-90" y="46.5">TN</text>
          <circle class="st-dot" cx="-92" cy="47" fill="#F56565"/><text class="st-label" x="-92" y="48.5">AL</text>
          <circle class="st-dot" cx="-94" cy="47" fill="#F56565"/><text class="st-label" x="-94" y="48.5">MS</text>
          <circle class="st-dot" cx="-96" cy="46" fill="#F56565"/><text class="st-label" x="-96" y="47.5">AR</text>
          <circle class="st-dot" cx="-94" cy="49" fill="#F56565"/><text class="st-label" x="-94" y="50.5">LA</text>
          <!-- Southwest (amber) -->
          <circle class="st-dot" cx="-112" cy="47" fill="#F59E0B"/><text class="st-label" x="-112" y="48.5">AZ</text>
          <circle class="st-dot" cx="-108" cy="47" fill="#F59E0B"/><text class="st-label" x="-108" y="48.5">NM</text>
          <circle class="st-dot" cx="-100" cy="47" fill="#F59E0B"/><text class="st-label" x="-100" y="48.5">OK</text>
          <circle class="st-dot" cx="-100" cy="50" fill="#F59E0B"/><text class="st-label" x="-100" y="51.5">TX</text>
          <!-- DE, MD, DC -->
          <circle class="st-dot" cx="-78" cy="42" fill="#A855F7"/><text class="st-label" x="-78" y="43.5">DE</text>
          <circle class="st-dot" cx="-80" cy="43" fill="#F56565"/><text class="st-label" x="-80" y="42">MD</text>
          <circle class="st-dot" cx="-79" cy="43.5" fill="#F56565"/><text class="st-label" x="-79" y="45">DC</text>
        </svg>
      </div>
    </div>
  </div>
</div>

<!-- ═══════════ OPERATIONS & BRANDS ═══════════ -->
<div class="section-group">
  <div class="section-label domain"><h2>Operations &amp; Brands</h2><span class="count">21 entities &middot; 14 brand books</span></div>
  <div class="grid">
    <!-- SomeAI (brand book only) -->
    <a class="card card-domain" href="design/brandbook/someai/">
      <span class="icon"><img src="design/brandbook/someai/assets/LOGO.png" alt="SomeAI" style="width:32px;height:32px;object-fit:contain"></span>
      <div class="card-text"><h2>SomeAI</h2><p>Research lab &mdash; spider web mark, red/mauve palette</p><span class="tag tag-domain">Brand</span><span class="tag tag-kernel" style="margin-left:4px">Design System</span></div>
    </a>
    <!-- Richard Enterprises (brand book only) -->
    <a class="card card-domain" href="design/brandbook/richard-enterprises/">
      <span class="icon"><img src="design/brandbook/richard-enterprises/assets/logo_and_name.png" alt="Richard Enterprises" style="width:32px;height:32px;object-fit:contain"></span>
      <div class="card-text"><h2>Richard Enterprises</h2><p>Family holding company &mdash; umbrella entity, charcoal/gold/navy palette</p><span class="tag tag-domain">Brand</span><span class="tag tag-kernel" style="margin-left:4px">Design System</span></div>
    </a>
    <!-- ISG (domain + brand) -->
    <div class="card card-domain card-duo">
      <span class="icon"><img src="design/brandbook/isg/assets/logo_and_name.png" alt="ISG" style="width:32px;height:32px;object-fit:contain"></span>
      <div class="card-text"><h2><a class="card-main" href="business/industrial-service-group/">ISG</a></h2><p>16 brands, $450M rev, 259K+ SKUs &mdash; equipment graph, dispatch intelligence, PE reporting</p><span class="tag tag-domain">Mechanical</span></div>
      <a class="card-brand" href="design/brandbook/isg/" title="Brand Book">Brand</a>
    </div>
    <!-- Sounder (domain + brand) -->
    <div class="card card-domain card-duo">
      <span class="icon"><img src="design/brandbook/sounder/assets/SOUNDER_BRAND_ICON.png" alt="Sounder" style="width:32px;height:32px;object-fit:contain;border-radius:4px"></span>
      <div class="card-text"><h2><a class="card-main" href="business/sounder/">Sounder</a></h2><p>Unified swine genetics infrastructure &mdash; 401K KRF facts, 3 registries, 77K breeders</p><span class="tag tag-domain">Biological</span></div>
      <a class="card-brand" href="design/brandbook/sounder/" title="Brand Book &amp; Design System">Brand</a>
    </div>
    <!-- NSR Partnership (domain only) -->
    <a class="card card-domain" href="business/sounder/nsr/">
      <span class="icon">&#x1F4DC;</span>
      <div class="card-text"><h2>NSR Partnership</h2><p>National Swine Registry &mdash; 4 breeds, 3,763 breeders, CRM + website + threat matrix</p><span class="tag tag-domain">Partnership</span></div>
    </a>
    <!-- CPS Partnership (domain only) -->
    <a class="card card-domain" href="business/sounder/cps/">
      <span class="icon">&#x1F4DC;</span>
      <div class="card-text"><h2>CPS Partnership</h2><p>Certified Pedigree Swine &mdash; 65,412 breeders, 10+ breeds, 5,279 herdmarks</p><span class="tag tag-domain">Partnership</span></div>
    </a>
    <!-- TSA Partnership (domain only) -->
    <a class="card card-domain" href="business/sounder/tsa/">
      <span class="icon">&#x1F4DC;</span>
      <div class="card-text"><h2>TSA Partnership</h2><p>Tamworth Swine Association &mdash; 113 breeders, heritage bacon breed, pasture-raised</p><span class="tag tag-domain">Partnership</span></div>
    </a>
    <!-- PPP Instruments (domain + brand) -->
    <div class="card card-domain card-duo">
      <span class="icon">&#x1F3BB;</span>
      <div class="card-text"><h2><a class="card-main" href="business/violins/">PPP Instruments</a></h2><p>$5.3M rare string portfolio &mdash; 21 instruments, 88.3% avg appreciation, provenance graph</p><span class="tag tag-domain">Cultural</span></div>
      <a class="card-brand" href="design/brandbook/ppp-instruments/" title="Brand Book &amp; Design System">Brand</a>
    </div>
    <!-- Top Tier Moving (domain + brand) -->
    <div class="card card-domain card-duo">
      <span class="icon">&#x1F69A;</span>
      <div class="card-text"><h2><a class="card-main" href="business/top-tier-moving/">Top Tier Moving</a></h2><p>$14.4M billed, 98 crew, 10,606 jobs &mdash; baseball cards, collection analytics, route intelligence</p><span class="tag tag-domain">Logistics</span></div>
      <a class="card-brand" href="design/brandbook/top-tier-moving/" title="Brand Book &amp; Design System">Brand</a>
    </div>
    <!-- All State Manufacturing (domain + brand) -->
    <div class="card card-domain card-duo">
      <span class="icon">&#x2692;</span>
      <div class="card-text"><h2><a class="card-main" href="business/allstate-manufacturing/">All State Manufacturing</a></h2><p>$2.2M micro market fixtures &mdash; 50yr manufacturer, $105K MSA, zero-to-observable transformation</p><span class="tag tag-domain">Manufacturing</span></div>
      <a class="card-brand" href="design/brandbook/allstate-manufacturing/" title="Brand Book &amp; Design System">Brand</a>
    </div>
    <!-- CardVault (domain + brand) -->
    <div class="card card-domain card-duo">
      <span class="icon">&#x1F3C6;</span>
      <div class="card-text"><h2><a class="card-main" href="business/cardvault/">CardVault by Tom Brady</a></h2><p>12 locations, 338% growth, $510K MSA &mdash; collector intelligence, grading pipeline, cross-store CRM</p><span class="tag tag-domain">Collectibles</span></div>
      <a class="card-brand" href="design/brandbook/cardvault/" title="Brand Book &amp; Design System">Brand</a>
    </div>
    <!-- Wendt Group (domain + brand) -->
    <div class="card card-domain card-duo">
      <span class="icon">&#x1F3AA;</span>
      <div class="card-text"><h2><a class="card-main" href="business/wendt-group/">The Wendt Group</a></h2><p>ShowPig.com &mdash; 12K+ auctions, $156K MSA, first crossbred pedigree engine in the industry</p><span class="tag tag-domain">Livestock</span></div>
      <a class="card-brand" href="design/brandbook/wendt-group/" title="Brand Book &amp; Design System">Brand</a>
    </div>
    <!-- Monroe Livestock (domain + brand) -->
    <div class="card card-domain card-duo">
      <span class="icon">&#x1F404;</span>
      <div class="card-text"><h2><a class="card-main" href="business/monroe-livestock/">Monroe Livestock Auction</a></h2><p>Weekly livestock auction, Adams County &mdash; Swiss Amish corridor, $67.5K MSA, DVAuction-integrated</p><span class="tag tag-domain">Livestock</span></div>
      <a class="card-brand" href="design/brandbook/monroe-livestock/" title="Brand Book">Brand</a>
    </div>
    <!-- SC Online Sales (domain + brand) -->
    <div class="card card-domain card-duo">
      <span class="icon">&#x1F3A4;</span>
      <div class="card-text"><h2><a class="card-main" href="business/sc-online-sales/">SC Online Sales</a></h2><p>5-species livestock platform &mdash; 40K+ auctions, $135K MSA, cross-species buyer intelligence</p><span class="tag tag-domain">Livestock</span></div>
      <a class="card-brand" href="design/brandbook/sc-online-sales/" title="Brand Book &amp; Design System">Brand</a>
    </div>
    <!-- LineLeap (domain only) -->
    <a class="card card-domain" href="business/lineleap/">
      <span class="icon">&#x1F378;</span>
      <div class="card-text"><h2>LineLeap Agent</h2><p>Charlotte-powered bar management agent</p><span class="tag tag-domain">Human</span></div>
    </a>
    <!-- GesDate (domain only) -->
    <a class="card card-domain" href="business/gesdate/">
      <span class="icon">&#x1F437;</span>
      <div class="card-text"><h2>GesDate Agent</h2><p>Charlotte-powered herd management agent</p><span class="tag tag-domain">Biological</span></div>
    </a>
    <!-- Sea Lion (domain + brand) -->
    <div class="card card-domain card-duo">
      <span class="icon">&#x1F9AD;</span>
      <div class="card-text"><h2><a class="card-main" href="references/sealion/">Sea Lion</a></h2><p>Ocean science &amp; marine biology research</p><span class="tag tag-domain">Marine</span></div>
      <a class="card-brand" href="design/brandbook/sea-lion/" title="Brand Book">Brand</a>
    </div>
    <!-- Maestro (domain only) -->
    <a class="card card-domain" href="tools/maestro/">
      <span class="icon">&#x1F4CA;</span>
      <div class="card-text"><h2>Maestro</h2><p>3-year strategy deployment quad matrix</p><span class="tag tag-domain">Strategy</span></div>
    </a>
    <!-- Gantt (domain only) -->
    <a class="card card-domain" href="tools/gantt/">
      <span class="icon">&#x1F4C5;</span>
      <div class="card-text"><h2>Gantt</h2><p>Charlotte OS demo sprint &mdash; 12-day plan to Feb 23</p><span class="tag tag-domain">Sprint</span></div>
    </a>
    <!-- Serengeti (brand book only) -->
    <a class="card card-domain" href="design/brandbook/serengeti/">
      <span class="icon">&#x1F981;</span>
      <div class="card-text"><h2>Serengeti</h2><p>Generational retirement pool &mdash; savanna gold, earth tones</p><span class="tag tag-domain">Brand</span></div>
    </a>
    <!-- Apple iOS 26 (reference brand book) -->
    <a class="card" href="design/brandbook/apple/">
      <span class="icon">&#xF8FF;</span>
      <div class="card-text"><h2>Apple iOS 26</h2><p>Liquid Glass design system baseline reference</p><span class="tag tag-reference">Reference</span></div>
    </a>
  </div>
</div>

<!-- ═══════════ CONVEX HULL — REFERENCE LIBRARY ═══════════ -->
<div class="section-group">
  <div class="section-label reference"><h2>Convex Hull &mdash; Reference Library</h2><span class="count">25 references</span></div>
  <div class="grid">
    <a class="card" href="references/knowledge/">
      <span class="icon">&#x1F4D6;</span>
      <div class="card-text"><h2>Knowledge Primitives</h2><p>Structural, declarative, procedural, heuristic &amp; meta knowledge</p><span class="tag tag-reference">Convex Hull</span></div>
    </a>
    <a class="card" href="references/formal-logic/">
      <span class="icon">&forall;</span>
      <div class="card-text"><h2>Formal Logic</h2><p>Propositional logic, FOL, lambda calculus &amp; Lisp</p><span class="tag tag-reference">Reference</span></div>
    </a>
    <a class="card" href="references/graph-theory/">
      <span class="icon">&#x229B;</span>
      <div class="card-text"><h2>Graph Theory</h2><p>Knowledge graphs, ontologies &amp; graph databases</p><span class="tag tag-reference">Reference</span></div>
    </a>
    <a class="card" href="references/topology/">
      <span class="icon">&#x25CE;</span>
      <div class="card-text"><h2>Topology</h2><p>Algebraic topology, TDA &amp; higher dimensions</p><span class="tag tag-reference">Reference</span></div>
    </a>
    <a class="card" href="references/cognitive-science/">
      <span class="icon">&#x1F9E0;</span>
      <div class="card-text"><h2>Cognitive Science</h2><p>Predictive coding, Bayesian brain &amp; resonance</p><span class="tag tag-reference">Reference</span></div>
    </a>
    <a class="card" href="references/signal-processing/">
      <span class="icon">&#x3030;</span>
      <div class="card-text"><h2>Signal Processing</h2><p>Time series, frequency domain &amp; drift detection</p><span class="tag tag-reference">Reference</span></div>
    </a>
    <a class="card" href="references/temporal-databases/">
      <span class="icon">&#x23F1;</span>
      <div class="card-text"><h2>Temporal Databases</h2><p>Event sourcing, bitemporal modeling &amp; CQRS</p><span class="tag tag-reference">Reference</span></div>
    </a>
    <a class="card" href="references/spatial-computing/">
      <span class="icon">&#x1F30D;</span>
      <div class="card-text"><h2>Spatial Computing</h2><p>GIS, spatial databases &amp; geospatial algorithms</p><span class="tag tag-reference">Reference</span></div>
    </a>
    <a class="card" href="references/systems-architecture/">
      <span class="icon">&#x1F3D7;</span>
      <div class="card-text"><h2>Systems Architecture</h2><p>Distributed systems, DDD &amp; event-driven design</p><span class="tag tag-reference">Reference</span></div>
    </a>
    <a class="card" href="references/game-theory/">
      <span class="icon">&#x265F;</span>
      <div class="card-text"><h2>Game Theory</h2><p>Nash equilibrium, mechanism design &amp; evolutionary strategy</p><span class="tag tag-reference">Reference</span></div>
    </a>
    <a class="card" href="references/neuroscience/">
      <span class="icon">&#x1F9EC;</span>
      <div class="card-text"><h2>Neuroscience</h2><p>Neural geometry reference hub</p><span class="tag tag-reference">Reference</span></div>
    </a>
    <a class="card" href="references/nature-inspired-algorithms/">
      <span class="icon">&#x1F9EC;</span>
      <div class="card-text"><h2>Nature-Inspired Algorithms</h2><p>Evolutionary computation &amp; swarm intelligence</p><span class="tag tag-reference">Reference</span></div>
    </a>
    <a class="card" href="references/livestock-science/">
      <span class="icon">&#x1F404;</span>
      <div class="card-text"><h2>Livestock Science</h2><p>Genetics, breeding, reproduction &amp; show industry</p><span class="tag tag-reference">Reference</span></div>
    </a>
    <a class="card" href="references/biomimicry/">
      <span class="icon">&#x1F33F;</span>
      <div class="card-text"><h2>Biomimicry</h2><p>Principles, methodology &amp; case studies</p><span class="tag tag-reference">Reference</span></div>
    </a>
    <a class="card" href="references/bio-architecture/">
      <span class="icon">&#x1F3DB;</span>
      <div class="card-text"><h2>Bio-Architecture</h2><p>Termite ventilation, shells &amp; tensegrity</p><span class="tag tag-reference">Reference</span></div>
    </a>
    <a class="card" href="references/bio-inspired-robotics/">
      <span class="icon">&#x1F916;</span>
      <div class="card-text"><h2>Bio-Inspired Robotics</h2><p>Soft robotics, legged robots &amp; swarm systems</p><span class="tag tag-reference">Reference</span></div>
    </a>
    <a class="card" href="references/bio-locomotion/">
      <span class="icon">&#x1F98E;</span>
      <div class="card-text"><h2>Bio-Locomotion</h2><p>Flight, swimming &amp; collective motion</p><span class="tag tag-reference">Reference</span></div>
    </a>
    <a class="card" href="references/bio-optics-photonics/">
      <span class="icon">&#x1F52C;</span>
      <div class="card-text"><h2>Bio-Optics &amp; Photonics</h2><p>Structural color, bioluminescence &amp; camouflage</p><span class="tag tag-reference">Reference</span></div>
    </a>
    <a class="card" href="references/bio-surfaces/">
      <span class="icon">&#x1F9EB;</span>
      <div class="card-text"><h2>Bio-Surfaces</h2><p>Superhydrophobicity, gecko adhesion &amp; shark skin</p><span class="tag tag-reference">Reference</span></div>
    </a>
    <a class="card" href="references/biomimetic-materials/">
      <span class="icon">&#x1F9EA;</span>
      <div class="card-text"><h2>Biomimetic Materials</h2><p>Self-healing, shape memory &amp; hierarchical composites</p><span class="tag tag-reference">Reference</span></div>
    </a>
    <a class="card" href="references/structural-biomimetics/">
      <span class="icon">&#x1F9B4;</span>
      <div class="card-text"><h2>Structural Biomimetics</h2><p>Natural composites, silk, nacre &amp; bone</p><span class="tag tag-reference">Reference</span></div>
    </a>
    <a class="card" href="references/spider-silk/">
      <span class="icon">&#x1F577;</span>
      <div class="card-text"><h2>Spider Silk</h2><p>Silk biology, biomaterials &amp; husbandry</p><span class="tag tag-reference">Reference</span></div>
    </a>
    <a class="card" href="references/ecological-systems-design/">
      <span class="icon">&#x267B;</span>
      <div class="card-text"><h2>Ecological Systems Design</h2><p>Circular economy &amp; regenerative design</p><span class="tag tag-reference">Reference</span></div>
    </a>
    <a class="card" href="references/entomology/">
      <span class="icon">&#x1F41B;</span>
      <div class="card-text"><h2>Entomology</h2><p>Insect biology, pollination &amp; biomimicry</p><span class="tag tag-reference">Reference</span></div>
    </a>
    <a class="card" href="references/atomic-design/">
      <span class="icon">&#x269B;</span>
      <div class="card-text"><h2>Atomic Design</h2><p>Component hierarchy &amp; design systems</p><span class="tag tag-reference">Reference</span></div>
    </a>
  </div>
</div>

<!-- ═══════════ RESEARCH INSTRUMENTS ═══════════ -->
<div class="section-group">
  <div class="section-label research"><h2>Research Instruments</h2><span class="count">25 modules</span></div>
  <div class="grid">
    <a class="card card-research" href="math/swarm-intelligence/">
      <span class="icon">&#x1F41D;</span>
      <div class="card-text"><h2>Swarm Intelligence</h2><p>Northwestern 2019 curriculum, boids lab &amp; multi-agent systems</p><span class="tag tag-research">Research</span></div>
    </a>
    <a class="card" href="math/chaostheory/">
      <span class="icon">&#x1F300;</span>
      <div class="card-text"><h2>Chaos Theory</h2><p>Strange attractors &amp; dynamical systems</p><span class="tag tag-instrument">Simulation</span></div>
    </a>
    <a class="card" href="math/fourier/">
      <span class="icon">&#x3030;</span>
      <div class="card-text"><h2>Fourier</h2><p>Fourier transform visualization</p><span class="tag tag-instrument">Math</span></div>
    </a>
    <a class="card" href="math/cnn/">
      <span class="icon">&#x1F9E0;</span>
      <div class="card-text"><h2>CNN</h2><p>Convolutional neural network visualizer</p><span class="tag tag-instrument">ML</span></div>
    </a>
    <a class="card" href="math/neuralplayground/">
      <span class="icon">&#x1F52E;</span>
      <div class="card-text"><h2>Neural Playground</h2><p>Interactive neural network playground</p><span class="tag tag-instrument">ML</span></div>
    </a>
    <a class="card" href="math/sacred-geometry/">
      <span class="icon">&#x2721;</span>
      <div class="card-text"><h2>Sacred Geometry</h2><p>Geometric pattern generator</p><span class="tag tag-instrument">Math</span></div>
    </a>
    <a class="card" href="math/tsp-algorithm-visualizer/">
      <span class="icon">&#x1F5FA;</span>
      <div class="card-text"><h2>TSP Visualizer</h2><p>Traveling salesman algorithm visualizer</p><span class="tag tag-instrument">Algorithm</span></div>
    </a>
    <a class="card card-research" href="zeus-car-kit/">
      <span class="icon">&#x1F697;</span>
      <div class="card-text"><h2>Zeus Car Kit</h2><p>3D spatial mapper &mdash; ultrasonic, IR &amp; dead reckoning</p><span class="tag tag-research">Robotics</span></div>
    </a>
    <a class="card" href="games/hexgrid/">
      <span class="icon">&#x2B21;</span>
      <div class="card-text"><h2>Hex Grid</h2><p>Hexagonal grid system</p><span class="tag tag-instrument">Tool</span></div>
    </a>
    <a class="card" href="games/isometric/">
      <span class="icon">&#x1F4D0;</span>
      <div class="card-text"><h2>Isometric</h2><p>Isometric grid builder</p><span class="tag tag-instrument">Tool</span></div>
    </a>
    <a class="card" href="games/aseprite/">
      <span class="icon">&#x1F3A8;</span>
      <div class="card-text"><h2>Aseprite</h2><p>Pixel art sprite editor</p><span class="tag tag-instrument">Tool</span></div>
    </a>
    <a class="card" href="games/chess/">
      <span class="icon">&#x265F;</span>
      <div class="card-text"><h2>Chess</h2><p>Chess game with AI opponent</p><span class="tag tag-instrument">Game</span></div>
    </a>
    <a class="card" href="games/go/">
      <span class="icon">&#x26AB;</span>
      <div class="card-text"><h2>Go</h2><p>The ancient board game of Go</p><span class="tag tag-instrument">Game</span></div>
    </a>
    <a class="card" href="games/against-the-storm/">
      <span class="icon">&#x1F3F0;</span>
      <div class="card-text"><h2>Against the Storm</h2><p>Settlement management companion</p><span class="tag tag-instrument">Game</span></div>
    </a>
    <a class="card" href="games/maplestory/">
      <span class="icon">&#x1F41F;</span>
      <div class="card-text"><h2>MapleStory Bazaar</h2><p>Fish market vendor simulation</p><span class="tag tag-instrument">Game</span></div>
    </a>
    <a class="card" href="games/somelocks/">
      <span class="icon">&#x1F510;</span>
      <div class="card-text"><h2>SomeLocks</h2><p>2048-level lockpicking puzzle &mdash; hex grid, $3.99 IAP, first consumer revenue product</p><span class="tag tag-instrument">Game</span></div>
    </a>
    <a class="card" href="games/starfield/">
      <span class="icon">&#x2728;</span>
      <div class="card-text"><h2>Starfield / BITWISE</h2><p>Binary lockpicking puzzle game</p><span class="tag tag-instrument">Game</span></div>
    </a>
    <a class="card" href="games/2048/">
      <span class="icon">&#x1F522;</span>
      <div class="card-text"><h2>2048</h2><p>Sliding tile puzzle game</p><span class="tag tag-instrument">Game</span></div>
    </a>
    <a class="card" href="games/tetris/">
      <span class="icon">&#x1F7E6;</span>
      <div class="card-text"><h2>Tetris</h2><p>Falling block puzzle game</p><span class="tag tag-instrument">Game</span></div>
    </a>
    <a class="card" href="games/minesweeper/">
      <span class="icon">&#x1F4A3;</span>
      <div class="card-text"><h2>Minesweeper</h2><p>Classic mine-sweeping puzzle</p><span class="tag tag-instrument">Game</span></div>
    </a>
    <a class="card" href="games/sudoku/">
      <span class="icon">&#x1F532;</span>
      <div class="card-text"><h2>Sudoku</h2><p>Number placement puzzle</p><span class="tag tag-instrument">Game</span></div>
    </a>
    <a class="card" href="games/solitaire-glass/">
      <span class="icon">&#x1F0CF;</span>
      <div class="card-text"><h2>Solitaire Glass</h2><p>Glassmorphism solitaire card game</p><span class="tag tag-instrument">Game</span></div>
    </a>
    <a class="card" href="games/snake/">
      <span class="icon">&#x1F40D;</span>
      <div class="card-text"><h2>Snake</h2><p>Classic snake game</p><span class="tag tag-instrument">Game</span></div>
    </a>
    <a class="card" href="games/pong/">
      <span class="icon">&#x1F3D3;</span>
      <div class="card-text"><h2>Pong</h2><p>Classic paddle ball game</p><span class="tag tag-instrument">Game</span></div>
    </a>
    <a class="card" href="games/tic-tac-toe/">
      <span class="icon">&#x274C;</span>
      <div class="card-text"><h2>Tic-Tac-Toe</h2><p>Classic X and O game</p><span class="tag tag-instrument">Game</span></div>
    </a>
    <a class="card" href="games/block-dude/">
      <span class="icon">&#x1F9F1;</span>
      <div class="card-text"><h2>Block Dude</h2><p>Block-pushing puzzle platformer</p><span class="tag tag-instrument">Game</span></div>
    </a>
  </div>
</div>


<!-- ═══════════ Master Animation Script ═══════════ -->
<script>
(function() {
  var REDUCED_MOTION = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
  var IS_MOBILE = window.innerWidth < 700;
  var animating = true;

  // Pause animations when tab is hidden (Layer 6)
  document.addEventListener('visibilitychange', function() {
    animating = !document.hidden;
  });

  // If reduced motion, make everything visible immediately and bail
  if (REDUCED_MOTION) {
    var allEls = document.querySelectorAll('.card, .thesis-card, .thesis-wide, .abstract, .primitives-section, #force-graph');
    for (var i = 0; i < allEls.length; i++) allEls[i].classList.add('visible');
    return;
  }

  // === LAYER 5: Scroll-Triggered Card Entrances ===
  var scrollElements = document.querySelectorAll('.card, .thesis-card, .thesis-wide, .abstract, .primitives-section, #force-graph');

  // Calculate stagger delays per parent container
  var parents = new Map();
  for (var i = 0; i < scrollElements.length; i++) {
    var el = scrollElements[i];
    var p = el.parentElement;
    if (!parents.has(p)) parents.set(p, []);
    parents.get(p).push(el);
  }
  parents.forEach(function(els) {
    for (var i = 0; i < els.length; i++) {
      els[i].style.transitionDelay = (i * 50) + 'ms';
    }
  });

  var scrollObserver = new IntersectionObserver(function(entries) {
    for (var i = 0; i < entries.length; i++) {
      if (entries[i].isIntersecting) {
        entries[i].target.classList.add('visible');
        scrollObserver.unobserve(entries[i].target);
      }
    }
  }, { threshold: 0.08, rootMargin: '0px 0px -40px 0px' });

  for (var i = 0; i < scrollElements.length; i++) {
    scrollObserver.observe(scrollElements[i]);
  }

  // === LAYER 1: Neural Synapse Web Animation ===
  // 27 junction positions: outer(0-8), middle(9-17), inner(18-26)
  var junctions = [
    // Outer ring
    [0,-108],[65,-87],[103,-33],[95,50],[40,100],[-40,100],[-95,50],[-103,-33],[-65,-87],
    // Middle ring
    [0,-70],[42,-56],[67,-21],[62,32],[26,65],[-26,65],[-62,32],[-67,-21],[-42,-56],
    // Inner ring
    [0,-38],[23,-30],[36,-11],[34,18],[14,35],[-14,35],[-34,18],[-36,-11],[-23,-30]
  ];

  // Adjacency: radial connections (inner↔middle↔outer per spoke) + ring connections
  var adjList = [];
  for (var i = 0; i < 27; i++) adjList.push([]);
  // Radial connections: spoke i connects outer[i], middle[i+9], inner[i+18]
  for (var i = 0; i < 9; i++) {
    adjList[i].push(i + 9); adjList[i + 9].push(i);       // outer ↔ middle
    adjList[i + 9].push(i + 18); adjList[i + 18].push(i + 9); // middle ↔ inner
  }
  // Ring connections: adjacent nodes on same ring
  for (var ring = 0; ring < 3; ring++) {
    var base = ring * 9;
    for (var i = 0; i < 9; i++) {
      var next = base + (i + 1) % 9;
      adjList[base + i].push(next);
      adjList[next].push(base + i);
    }
  }

  var junctionEls = document.querySelectorAll('#neural-junctions .junction');
  var pulseEls = document.querySelectorAll('#neural-pulses .npulse');
  var MAX_SIGNALS = IS_MOBILE ? 3 : 6;
  var signals = []; // active signal chains
  var junctionFlashes = []; // {idx, opacity, decay}
  var nextFireTime = 1000 + Math.random() * 2000;
  var fireAccum = 0;

  function fireNewSignal() {
    if (signals.length >= MAX_SIGNALS) return;
    var startIdx = Math.floor(Math.random() * 27);
    signals.push({
      from: startIdx,
      to: adjList[startIdx][Math.floor(Math.random() * adjList[startIdx].length)],
      t: 0,
      speed: 0.002 + Math.random() * 0.002,
      intensity: 0.8 + Math.random() * 0.2,
      hops: 0,
      maxHops: 4 + Math.floor(Math.random() * 3),
      pulseIdx: -1
    });
  }

  function updateNeuralWeb(dt) {
    // Fire new signals periodically
    fireAccum += dt;
    if (fireAccum >= nextFireTime) {
      fireAccum = 0;
      nextFireTime = 2000 + Math.random() * 3000;
      fireNewSignal();
    }

    // Allocate pulse elements to signals
    var usedPulses = new Set();
    for (var i = 0; i < signals.length; i++) {
      if (signals[i].pulseIdx >= 0) usedPulses.add(signals[i].pulseIdx);
    }
    for (var i = 0; i < signals.length; i++) {
      if (signals[i].pulseIdx < 0) {
        for (var p = 0; p < pulseEls.length; p++) {
          if (!usedPulses.has(p)) {
            signals[i].pulseIdx = p;
            usedPulses.add(p);
            break;
          }
        }
      }
    }

    // Update signals
    for (var i = signals.length - 1; i >= 0; i--) {
      var s = signals[i];
      s.t += s.speed * dt;

      if (s.t >= 1) {
        // Arrived at destination junction — flash it
        junctionFlashes.push({ idx: s.to, opacity: 0.8, decay: 0.001 });
        s.hops++;
        s.intensity *= 0.75;

        // Die if too many hops or too dim
        if (s.hops >= s.maxHops || s.intensity < 0.15) {
          if (s.pulseIdx >= 0) {
            pulseEls[s.pulseIdx].setAttribute('opacity', '0');
          }
          signals.splice(i, 1);
          continue;
        }

        // Branch chance: 20% to spawn a second signal
        if (Math.random() < 0.2 && signals.length < MAX_SIGNALS) {
          var branchNeighbors = adjList[s.to].filter(function(n) { return n !== s.from; });
          if (branchNeighbors.length > 0) {
            signals.push({
              from: s.to,
              to: branchNeighbors[Math.floor(Math.random() * branchNeighbors.length)],
              t: 0,
              speed: s.speed,
              intensity: s.intensity * 0.7,
              hops: s.hops,
              maxHops: s.maxHops,
              pulseIdx: -1
            });
          }
        }

        // Move to next junction
        var neighbors = adjList[s.to].filter(function(n) { return n !== s.from; });
        if (neighbors.length === 0) {
          if (s.pulseIdx >= 0) pulseEls[s.pulseIdx].setAttribute('opacity', '0');
          signals.splice(i, 1);
          continue;
        }
        s.from = s.to;
        s.to = neighbors[Math.floor(Math.random() * neighbors.length)];
        s.t = 0;
      }

      // Interpolate position
      if (s.pulseIdx >= 0 && s.pulseIdx < pulseEls.length) {
        var fromJ = junctions[s.from];
        var toJ = junctions[s.to];
        var cx = fromJ[0] + (toJ[0] - fromJ[0]) * s.t;
        var cy = fromJ[1] + (toJ[1] - fromJ[1]) * s.t;
        var el = pulseEls[s.pulseIdx];
        el.setAttribute('cx', cx.toFixed(1));
        el.setAttribute('cy', cy.toFixed(1));
        el.setAttribute('opacity', (s.intensity * 0.9).toFixed(2));
      }
    }

    // Update junction flashes
    for (var i = junctionFlashes.length - 1; i >= 0; i--) {
      var f = junctionFlashes[i];
      f.opacity -= f.decay * dt;
      if (f.opacity <= 0) {
        if (junctionEls[f.idx]) junctionEls[f.idx].setAttribute('opacity', '0');
        junctionFlashes.splice(i, 1);
      } else {
        if (junctionEls[f.idx]) junctionEls[f.idx].setAttribute('opacity', f.opacity.toFixed(2));
      }
    }
  }

  // === LAYER 2: Micro-Graph Particle Network ===
  // Floating clusters of small node-edge graphs that interact when near each other
  var canvas = document.getElementById('particle-canvas');
  var microGraphs = [];
  var allNodes = [];
  var ctx, W, H;
  var pTime = 0;

  // Red swatch — primary 100 through 800
  var NODE_COLORS = [
    '#FED7D7', // 100
    '#FEB2B2', // 200
    '#FC8181', // 300
    '#F56565', // 400
    '#E53E3E', // 500
    '#C53030', // 600
    '#9B2C2C', // 700
    '#822727', // 800
  ];

  if (canvas && !IS_MOBILE) {
    ctx = canvas.getContext('2d');

    function resizeCanvas() {
      W = window.innerWidth;
      H = window.innerHeight;
      var dpr = window.devicePixelRatio || 1;
      canvas.width = W * dpr;
      canvas.height = H * dpr;
      ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
    }
    resizeCanvas();
    window.addEventListener('resize', resizeCanvas);

    // Build 256 micro-graphs, each a small cluster of 3-6 nodes
    var GRAPH_COUNT = 256;
    for (var g = 0; g < GRAPH_COUNT; g++) {
      var cx = Math.random() * (W || 800);
      var cy = Math.random() * (H || 400);
      var nodeCount = 3 + Math.floor(Math.random() * 4); // 3-6 nodes
      var spread = 18 + Math.random() * 14; // cluster radius
      var baseColor = NODE_COLORS[Math.floor(Math.random() * NODE_COLORS.length)];
      var graph = {
        cx: cx, cy: cy,
        vx: (Math.random() - 0.5) * 0.3,
        vy: (Math.random() - 0.5) * 0.3,
        rot: Math.random() * 6.2832,
        rotSpeed: (Math.random() - 0.5) * 0.003,
        nodes: [],
        edges: [],
        baseColor: baseColor,
        pulse: Math.random() * 6.2832 // phase offset for breathing
      };

      // Create nodes at offsets from center
      for (var n = 0; n < nodeCount; n++) {
        var angle = (n / nodeCount) * 6.2832 + (Math.random() - 0.5) * 0.8;
        var dist = spread * (0.4 + Math.random() * 0.6);
        var useColor = Math.random() < 0.3
          ? NODE_COLORS[Math.floor(Math.random() * NODE_COLORS.length)]
          : baseColor;
        var node = {
          ox: Math.cos(angle) * dist, // offset from graph center
          oy: Math.sin(angle) * dist,
          r: 1.5 + Math.random() * 2.5,
          color: useColor,
          graphIdx: g,
          wx: 0, wy: 0 // world position (computed each frame)
        };
        graph.nodes.push(node);
        allNodes.push(node);
      }

      // Create internal edges (connect nodes within the cluster)
      // Each node connects to 1-2 neighbors + hub node connects to most
      var hubIdx = Math.floor(Math.random() * nodeCount);
      for (var n = 0; n < nodeCount; n++) {
        if (n !== hubIdx) {
          graph.edges.push([hubIdx, n]);
        }
      }
      // Add 1-2 extra edges for triangulation
      var extras = 1 + Math.floor(Math.random() * 2);
      for (var e = 0; e < extras; e++) {
        var a = Math.floor(Math.random() * nodeCount);
        var b = Math.floor(Math.random() * nodeCount);
        if (a !== b) graph.edges.push([a, b]);
      }

      microGraphs.push(graph);
    }

  }

  function drawParticles() {
    if (!ctx || !W || !H) return;
    // Dark fill — prevents white flash between frames
    ctx.globalAlpha = 1;
    ctx.fillStyle = '#141414';
    ctx.fillRect(0, 0, W, H);
    pTime += 0.016;

    // === Update all graph positions + compute world coords ===
    for (var g = 0; g < microGraphs.length; g++) {
      var mg = microGraphs[g];
      mg.cx += mg.vx;
      mg.cy += mg.vy;
      mg.vx *= 0.9995;
      mg.vy *= 0.9995;
      mg.rot += mg.rotSpeed;

      // Wrap at viewport edges
      if (mg.cx < -60) mg.cx = W + 60;
      if (mg.cx > W + 60) mg.cx = -60;
      if (mg.cy < -60) mg.cy = H + 60;
      if (mg.cy > H + 60) mg.cy = -60;

      var pulse = 1 + Math.sin(pTime * 1.2 + mg.pulse) * 0.08;
      var cosR = Math.cos(mg.rot);
      var sinR = Math.sin(mg.rot);
      for (var n = 0; n < mg.nodes.length; n++) {
        var nd = mg.nodes[n];
        nd.wx = mg.cx + (nd.ox * cosR - nd.oy * sinR) * pulse;
        nd.wy = mg.cy + (nd.ox * sinR + nd.oy * cosR) * pulse;
      }
    }

    // === Draw inter-graph edges + signal dots ===
    // Check graph center distances (256*255/2 = 32K — cheap)
    var LINK_DIST = 140;
    var LINK_DIST2 = LINK_DIST * LINK_DIST;
    ctx.lineWidth = 0.4;
    for (var g = 0; g < microGraphs.length; g++) {
      for (var g2 = g + 1; g2 < microGraphs.length; g2++) {
        var dx = microGraphs[g].cx - microGraphs[g2].cx;
        var dy = microGraphs[g].cy - microGraphs[g2].cy;
        var d2 = dx * dx + dy * dy;
        if (d2 > LINK_DIST2 || d2 < 1) continue;

        var d = Math.sqrt(d2);
        var fade = 1 - d / LINK_DIST;

        // Connect hub nodes (index 0) of each graph
        var na = microGraphs[g].nodes[0];
        var nb = microGraphs[g2].nodes[0];

        // Edge line
        ctx.beginPath();
        ctx.moveTo(na.wx, na.wy);
        ctx.lineTo(nb.wx, nb.wy);
        ctx.strokeStyle = '#E53E3E';
        ctx.globalAlpha = fade * 0.12;
        ctx.stroke();

        // Signal dot traveling along the edge
        var speed = 0.3 + (g % 5) * 0.08;
        var phase = (g * 7 + g2 * 13) % 100 / 100;
        var t = ((pTime * speed + phase) % 1);
        var sx = na.wx + (nb.wx - na.wx) * t;
        var sy = na.wy + (nb.wy - na.wy) * t;

        ctx.beginPath();
        ctx.arc(sx, sy, 1.5, 0, 6.2832);
        ctx.fillStyle = '#F56565';
        ctx.globalAlpha = fade * 0.6;
        ctx.fill();
      }
    }

    // === Draw internal edges + nodes per graph ===
    for (var g = 0; g < microGraphs.length; g++) {
      var mg = microGraphs[g];

      // Internal edges
      ctx.strokeStyle = mg.baseColor;
      ctx.lineWidth = 0.6;
      for (var e = 0; e < mg.edges.length; e++) {
        var edge = mg.edges[e];
        var na = mg.nodes[edge[0]];
        var nb = mg.nodes[edge[1]];
        ctx.beginPath();
        ctx.moveTo(na.wx, na.wy);
        ctx.lineTo(nb.wx, nb.wy);
        ctx.globalAlpha = 0.18 + Math.sin(pTime * 2 + mg.pulse + e) * 0.06;
        ctx.stroke();
      }

      // Nodes
      for (var n = 0; n < mg.nodes.length; n++) {
        var nd = mg.nodes[n];
        ctx.fillStyle = nd.color;
        // Glow
        ctx.beginPath();
        ctx.arc(nd.wx, nd.wy, nd.r * 2.2, 0, 6.2832);
        ctx.globalAlpha = 0.04;
        ctx.fill();
        // Core
        ctx.beginPath();
        ctx.arc(nd.wx, nd.wy, nd.r, 0, 6.2832);
        ctx.globalAlpha = 0.55;
        ctx.fill();
      }
    }
    ctx.globalAlpha = 1;
  }

  // === MAIN ANIMATION LOOP ===
  var lastTime = 0;

  function loop(time) {
    if (!animating) {
      lastTime = 0;
      requestAnimationFrame(loop);
      return;
    }

    var dt = lastTime ? Math.min(time - lastTime, 50) : 16;
    lastTime = time;

    updateNeuralWeb(dt);
    if (canvas && !IS_MOBILE) drawParticles();

    requestAnimationFrame(loop);
  }

  requestAnimationFrame(loop);

  // === FORCE GRAPH: Project Constellation ===
  var fgCanvas = document.getElementById('fg-canvas');
  if (fgCanvas) { (function() {
    var fctx = fgCanvas.getContext('2d');
    var B = '';

    // Category colors: fill, stroke, text
    var CC = {
      anchor:     { s: '#E53E3E', t: '#E53E3E' },
      parent:     { s: '#F59E0B', t: '#F59E0B' },
      engine:     { s: '#E53E3E', t: '#F56565' },
      kernel:     { s: '#E53E3E', t: '#F56565' },
      domain:     { s: '#68D391', t: '#68D391' },
      reference:  { s: '#6B4F4F', t: '#C4A8A8' },
      research:   { s: '#F59E0B', t: '#F59E0B' },
      instrument: { s: '#444',   t: '#999' }
    };

    // Node definitions: id, name, icon, url, category, radius, parent
    // p = parent id (edges auto-generated), r = node radius
    var N = [
      // === Anchors ===
      {id:'someai',n:'SomeAI',i:'\u2B21',u:B+'design/brandbook/someai/',c:'anchor',r:22,p:null},
      {id:'re',n:'Richard Enterprises',i:'\u{1F981}',u:B+'design/brandbook/richard-enterprises/',c:'parent',r:14,p:'someai'},
      {id:'charlotte',n:'Charlotte',i:'\u{1F578}',u:null,c:'engine',r:18,p:'someai'},
      // === Clients (→ SomeAI) ===
      {id:'sounder',n:'Sounder',i:'\u{1F417}',u:B+'business/sounder/',c:'domain',r:9,p:'someai'},
      {id:'isg',n:'ISG',i:'\u{1F3ED}',u:B+'business/industrial-service-group/',c:'domain',r:9,p:'someai'},
      {id:'ppp',n:'PPP Instruments',i:'\u{1F3BB}',u:B+'business/violins/',c:'domain',r:8,p:'someai'},
      {id:'toptier',n:'Top Tier',i:'\u{1F69A}',u:B+'business/top-tier-moving/',c:'domain',r:8,p:'someai'},
      {id:'allstate',n:'All State Mfg',i:'\u2692',u:B+'business/allstate-manufacturing/',c:'domain',r:8,p:'someai'},
      {id:'cardvault',n:'CardVault',i:'\u{1F3C6}',u:B+'business/cardvault/',c:'domain',r:7,p:'someai'},
      {id:'wendt',n:'Wendt Group',i:'\u{1F3AA}',u:B+'business/wendt-group/',c:'domain',r:7,p:'someai'},
      {id:'monroe',n:'Monroe Livestock',i:'\u{1F404}',u:B+'business/monroe-livestock/',c:'domain',r:7,p:'someai'},
      {id:'sconline',n:'SC Online Sales',i:'\u{1F3A4}',u:B+'business/sc-online-sales/',c:'domain',r:7,p:'someai'},
      {id:'lineleap',n:'LineLeap',i:'\u{1F378}',u:B+'business/lineleap/',c:'domain',r:7,p:'someai'},
      {id:'gesdate',n:'GesDate',i:'\u{1F437}',u:B+'business/gesdate/',c:'domain',r:7,p:'someai'},
      {id:'sealion',n:'Sea Lion',i:'\u{1F9AD}',u:B+'references/sealion/',c:'domain',r:7,p:'someai'},
      // === Tools (→ SomeAI) ===
      {id:'maestro',n:'Maestro',i:'\u{1F3BC}',u:B+'tools/maestro/',c:'domain',r:8,p:'someai'},
      {id:'gantt',n:'Gantt',i:'\u{1F4C5}',u:B+'tools/gantt/',c:'domain',r:7,p:'someai'},
      {id:'geoparticles',n:'GeoParticles',i:'\u2728',u:B+'tools/geoparticles/',c:'instrument',r:8,p:'someai'},
      {id:'ants',n:'Foraging Ants',i:'\u{1F41C}',u:B+'tools/geoparticles/ants.html',c:'instrument',r:7,p:'someai'},
      // === Kernel (→ Charlotte) ===
      {id:'researchlab',n:'Research Lab',i:'\u{1F9E0}',u:B+'research-lab/',c:'kernel',r:9,p:'charlotte'},
      {id:'kg',n:'Knowledge Graph',i:'\u{1F4DA}',u:B+'knowledge-graph/',c:'kernel',r:8,p:'charlotte'},
      {id:'cos',n:'Charlotte OS',i:'\u2699',u:B+'charlotte-os/',c:'kernel',r:9,p:'charlotte'},
      {id:'temporal',n:'Temporal Spine',i:'\u{1F553}',u:B+'charlotte/temporal/',c:'kernel',r:8,p:'charlotte'},
      {id:'spatial',n:'Spatial',i:'\u{1F5FA}',u:B+'charlotte/spatial/',c:'kernel',r:8,p:'charlotte'},
      {id:'papers',n:'Papers',i:'\u{1F4C4}',u:B+'papers/',c:'kernel',r:7,p:'charlotte'},
      {id:'workbench',n:'Workbench',i:'\u{1F3A8}',u:B+'workbench/',c:'kernel',r:7,p:'charlotte'},
      {id:'pitcheng',n:'Pitch Engine',i:'\u{1F4CA}',u:B+'tools/pitch-engine/',c:'kernel',r:8,p:'charlotte'},
      {id:'pitchdecks',n:'Pitch Decks',i:'\u{1F4BD}',u:B+'tools/pitch-engine/decks/',c:'kernel',r:6,p:'pitcheng'},
      {id:'charts',n:'Charts',i:'\u{1F4C9}',u:B+'charlotte/charts/showcase/',c:'kernel',r:7,p:'charlotte'},
      {id:'pipeline',n:'Pipeline',i:'\u{1F4C8}',u:B+'business/forecast.html',c:'kernel',r:7,p:'charlotte'},
      {id:'bizkrf',n:'Biz Model KRF',i:'\u{1F4BE}',u:B+'charlotte/docs/artifacts/business_model.krf',c:'kernel',r:6,p:'charlotte'},
      // === Math / Research (→ Charlotte) ===
      {id:'cnn',n:'CNN',i:'\u{1F9E0}',u:B+'math/cnn/',c:'instrument',r:6,p:'charlotte'},
      {id:'neuralplay',n:'Neural Play',i:'\u{1F52E}',u:B+'math/neuralplayground/',c:'instrument',r:6,p:'charlotte'},
      {id:'chaos',n:'Chaos Theory',i:'\u{1F300}',u:B+'math/chaostheory/',c:'instrument',r:6,p:'charlotte'},
      {id:'fourier',n:'Fourier',i:'\u3030',u:B+'math/fourier/',c:'instrument',r:6,p:'charlotte'},
      {id:'sacredgeo',n:'Sacred Geo',i:'\u2721',u:B+'math/sacred-geometry/',c:'instrument',r:6,p:'charlotte'},
      {id:'tsp',n:'TSP',i:'\u{1F5FA}',u:B+'math/tsp-algorithm-visualizer/',c:'instrument',r:6,p:'charlotte'},
      {id:'swarm',n:'Swarm Intel',i:'\u{1F41D}',u:B+'math/swarm-intelligence/',c:'research',r:7,p:'charlotte'},
      {id:'zeuscar',n:'Zeus Car',i:'\u{1F697}',u:B+'zeus-car-kit/',c:'research',r:6,p:'charlotte'},
      // === References (→ Charlotte) ===
      {id:'rknowledge',n:'Knowledge',i:'\u{1F4D6}',u:B+'references/knowledge/',c:'reference',r:5,p:'charlotte'},
      {id:'rformallogic',n:'Formal Logic',i:'\u2200',u:B+'references/formal-logic/',c:'reference',r:5,p:'charlotte'},
      {id:'rgraphtheory',n:'Graph Theory',i:'\u229B',u:B+'references/graph-theory/',c:'reference',r:5,p:'charlotte'},
      {id:'rtopology',n:'Topology',i:'\u25CE',u:B+'references/topology/',c:'reference',r:5,p:'charlotte'},
      {id:'rcogscience',n:'Cog Science',i:'\u{1F9E0}',u:B+'references/cognitive-science/',c:'reference',r:5,p:'charlotte'},
      {id:'rsignalproc',n:'Signal Proc',i:'\u3030',u:B+'references/signal-processing/',c:'reference',r:5,p:'charlotte'},
      {id:'rtemporaldb',n:'Temporal DB',i:'\u23F1',u:B+'references/temporal-databases/',c:'reference',r:5,p:'charlotte'},
      {id:'rspatial',n:'Spatial Comp',i:'\u{1F30D}',u:B+'references/spatial-computing/',c:'reference',r:5,p:'charlotte'},
      {id:'rsysarch',n:'Systems Arch',i:'\u{1F3D7}',u:B+'references/systems-architecture/',c:'reference',r:5,p:'charlotte'},
      {id:'rgametheory',n:'Game Theory',i:'\u265F',u:B+'references/game-theory/',c:'reference',r:5,p:'charlotte'},
      {id:'rneuro',n:'Neuroscience',i:'\u{1F9EC}',u:B+'references/neuroscience/',c:'reference',r:5,p:'charlotte'},
      {id:'rnaturealgo',n:'Nature Algo',i:'\u{1F9EC}',u:B+'references/nature-inspired-algorithms/',c:'reference',r:5,p:'charlotte'},
      {id:'rlivestock',n:'Livestock',i:'\u{1F404}',u:B+'references/livestock-science/',c:'reference',r:5,p:'charlotte'},
      {id:'rbiomimicry',n:'Biomimicry',i:'\u{1F33F}',u:B+'references/biomimicry/',c:'reference',r:5,p:'charlotte'},
      {id:'rbioarch',n:'Bio-Arch',i:'\u{1F3DB}',u:B+'references/bio-architecture/',c:'reference',r:4,p:'charlotte'},
      {id:'rbiorobot',n:'Bio-Robotics',i:'\u{1F916}',u:B+'references/bio-inspired-robotics/',c:'reference',r:4,p:'charlotte'},
      {id:'rlocomotion',n:'Locomotion',i:'\u{1F98E}',u:B+'references/bio-locomotion/',c:'reference',r:4,p:'charlotte'},
      {id:'rbiooptics',n:'Bio-Optics',i:'\u{1F52C}',u:B+'references/bio-optics-photonics/',c:'reference',r:4,p:'charlotte'},
      {id:'rbiosurf',n:'Bio-Surfaces',i:'\u{1F9EB}',u:B+'references/bio-surfaces/',c:'reference',r:4,p:'charlotte'},
      {id:'rbiomat',n:'Bio-Materials',i:'\u{1F9EA}',u:B+'references/biomimetic-materials/',c:'reference',r:4,p:'charlotte'},
      {id:'rstructbio',n:'Struct Bio',i:'\u{1F9B4}',u:B+'references/structural-biomimetics/',c:'reference',r:4,p:'charlotte'},
      {id:'rspidersilk',n:'Spider Silk',i:'\u{1F577}',u:B+'references/spider-silk/',c:'reference',r:4,p:'charlotte'},
      {id:'recodesign',n:'Eco Design',i:'\u267B',u:B+'references/ecological-systems-design/',c:'reference',r:4,p:'charlotte'},
      {id:'rentomology',n:'Entomology',i:'\u{1F41B}',u:B+'references/entomology/',c:'reference',r:4,p:'charlotte'},
      {id:'ratomicdesign',n:'Atomic Design',i:'\u269B',u:B+'references/atomic-design/',c:'reference',r:4,p:'charlotte'},
      // === Games (→ SomeAI) ===
      {id:'hexgrid',n:'Hex Grid',i:'\u2B21',u:B+'games/hexgrid/',c:'instrument',r:5,p:'someai'},
      {id:'isometric',n:'Isometric',i:'\u{1F4D0}',u:B+'games/isometric/',c:'instrument',r:5,p:'someai'},
      {id:'aseprite',n:'Aseprite',i:'\u{1F3A8}',u:B+'games/aseprite/',c:'instrument',r:5,p:'someai'},
      {id:'chess',n:'Chess',i:'\u265F',u:B+'games/chess/',c:'instrument',r:5,p:'someai'},
      {id:'go',n:'Go',i:'\u26AB',u:B+'games/go/',c:'instrument',r:5,p:'someai'},
      {id:'storm',n:'Storm',i:'\u{1F3F0}',u:B+'games/against-the-storm/',c:'instrument',r:5,p:'someai'},
      {id:'maple',n:'MapleStory',i:'\u{1F41F}',u:B+'games/maplestory/',c:'instrument',r:5,p:'someai'},
      {id:'starfield',n:'Starfield',i:'\u2728',u:B+'games/starfield/',c:'instrument',r:5,p:'someai'},
      {id:'somelocks',n:'SomeLocks',i:'\u{1F510}',u:B+'games/somelocks/',c:'instrument',r:5,p:'someai'},
      {id:'g2048',n:'2048',i:'\u{1F522}',u:B+'games/2048/',c:'instrument',r:5,p:'someai'},
      {id:'tetris',n:'Tetris',i:'\u{1F7E6}',u:B+'games/tetris/',c:'instrument',r:5,p:'someai'},
      {id:'minesweeper',n:'Minesweeper',i:'\u{1F4A3}',u:B+'games/minesweeper/',c:'instrument',r:5,p:'someai'},
      {id:'sudoku',n:'Sudoku',i:'\u{1F532}',u:B+'games/sudoku/',c:'instrument',r:5,p:'someai'},
      {id:'solitaire',n:'Solitaire',i:'\u{1F0CF}',u:B+'games/solitaire-glass/',c:'instrument',r:5,p:'someai'},
      {id:'snake',n:'Snake',i:'\u{1F40D}',u:B+'games/snake/',c:'instrument',r:5,p:'someai'},
      {id:'pong',n:'Pong',i:'\u{1F3D3}',u:B+'games/pong/',c:'instrument',r:5,p:'someai'},
      {id:'tictactoe',n:'Tic-Tac-Toe',i:'\u274C',u:B+'games/tic-tac-toe/',c:'instrument',r:5,p:'someai'},
      {id:'blockdude',n:'Block Dude',i:'\u{1F9F1}',u:B+'games/block-dude/',c:'instrument',r:5,p:'someai'}
    ];

    // Build edges from parent relationships
    var edges = [];
    var idMap = {};
    for (var i = 0; i < N.length; i++) idMap[N[i].id] = i;
    for (var i = 0; i < N.length; i++) {
      if (N[i].p && idMap[N[i].p] !== undefined) {
        edges.push([idMap[N[i].p], i]);
      }
    }

    // Build adjacency for hover highlighting
    var adj = [];
    for (var i = 0; i < N.length; i++) adj[i] = [];
    for (var i = 0; i < edges.length; i++) {
      adj[edges[i][0]].push(edges[i][1]);
      adj[edges[i][1]].push(edges[i][0]);
    }

    // Initialize positions — spread nodes with Y bias
    var W, H;
    function sizeCanvas() {
      var containerW = fgCanvas.parentElement.offsetWidth;
      W = Math.min(containerW, 1200);
      H = IS_MOBILE ? 500 : 650;
      var dpr = window.devicePixelRatio || 1;
      fgCanvas.style.width = W + 'px';
      fgCanvas.style.height = H + 'px';
      fgCanvas.width = W * dpr;
      fgCanvas.height = H * dpr;
      fctx.setTransform(dpr, 0, 0, dpr, 0, 0);
    }
    sizeCanvas();

    // Physics state
    var nodes = [];
    for (var i = 0; i < N.length; i++) {
      var nd = N[i];
      var angle = Math.random() * Math.PI * 2;
      var dist = 50 + Math.random() * 200;
      var yBias = 0;
      if (nd.id === 're') yBias = -180;
      else if (nd.id === 'charlotte') yBias = 140;
      else if (nd.c === 'kernel' || nd.c === 'engine' || nd.c === 'reference' || nd.c === 'research') yBias = 60 + Math.random() * 100;
      else if (nd.c === 'domain') yBias = -40 + Math.random() * 60 - 30;
      else if (nd.c === 'parent') yBias = -160;
      else yBias = Math.random() * 80 - 40;

      nodes.push({
        x: W/2 + Math.cos(angle) * dist,
        y: H/2 + yBias + Math.sin(angle) * dist * 0.3,
        vx: 0, vy: 0,
        pinned: nd.id === 'someai'
      });
    }
    // Pin SomeAI at center
    nodes[0].x = W/2;
    nodes[0].y = H/2;

    // Force simulation step
    function simStep() {
      var REPULSION = 3000;
      var SPRING = 0.008;
      var REST_LEN = IS_MOBILE ? 50 : 75;
      var GRAVITY = 0.002;
      var DAMPING = 0.88;
      var Y_BIAS = 0.003;

      // Repulsion (all pairs)
      for (var i = 0; i < nodes.length; i++) {
        for (var j = i + 1; j < nodes.length; j++) {
          var dx = nodes[j].x - nodes[i].x;
          var dy = nodes[j].y - nodes[i].y;
          var d2 = dx*dx + dy*dy;
          if (d2 < 1) d2 = 1;
          var d = Math.sqrt(d2);
          var f = REPULSION / d2;
          var fx = (dx/d) * f;
          var fy = (dy/d) * f;
          if (!nodes[i].pinned) { nodes[i].vx -= fx; nodes[i].vy -= fy; }
          if (!nodes[j].pinned) { nodes[j].vx += fx; nodes[j].vy += fy; }
        }
      }

      // Spring attraction (edges)
      for (var i = 0; i < edges.length; i++) {
        var a = nodes[edges[i][0]], b = nodes[edges[i][1]];
        var dx = b.x - a.x, dy = b.y - a.y;
        var d = Math.sqrt(dx*dx + dy*dy);
        if (d < 0.1) d = 0.1;
        var f = (d - REST_LEN) * SPRING;
        var fx = (dx/d) * f, fy = (dy/d) * f;
        if (!a.pinned) { a.vx += fx; a.vy += fy; }
        if (!b.pinned) { b.vx -= fx; b.vy -= fy; }
      }

      // Center gravity + Y bias
      for (var i = 0; i < nodes.length; i++) {
        if (nodes[i].pinned) continue;
        nodes[i].vx += (W/2 - nodes[i].x) * GRAVITY;
        nodes[i].vy += (H/2 - nodes[i].y) * GRAVITY;

        // Y bias for hierarchy
        var nd = N[i];
        if (nd.id === 're') nodes[i].vy += (H*0.15 - nodes[i].y) * Y_BIAS;
        else if (nd.id === 'charlotte') nodes[i].vy += (H*0.72 - nodes[i].y) * Y_BIAS;
        else if (nd.c === 'parent') nodes[i].vy += (H*0.12 - nodes[i].y) * Y_BIAS * 0.5;
        else if (nd.c === 'kernel' || nd.c === 'engine') nodes[i].vy += (H*0.7 - nodes[i].y) * Y_BIAS * 0.3;
        else if (nd.c === 'reference') nodes[i].vy += (H*0.82 - nodes[i].y) * Y_BIAS * 0.3;
        else if (nd.c === 'domain') nodes[i].vy += (H*0.35 - nodes[i].y) * Y_BIAS * 0.2;
      }

      // Integrate + damp + boundary
      for (var i = 0; i < nodes.length; i++) {
        if (nodes[i].pinned) { nodes[i].vx = 0; nodes[i].vy = 0; continue; }
        nodes[i].vx *= DAMPING;
        nodes[i].vy *= DAMPING;
        nodes[i].x += nodes[i].vx;
        nodes[i].y += nodes[i].vy;
        // Soft boundary
        var pad = N[i].r + 4;
        if (nodes[i].x < pad) { nodes[i].x = pad; nodes[i].vx *= -0.5; }
        if (nodes[i].x > W - pad) { nodes[i].x = W - pad; nodes[i].vx *= -0.5; }
        if (nodes[i].y < pad) { nodes[i].y = pad; nodes[i].vy *= -0.5; }
        if (nodes[i].y > H - pad) { nodes[i].y = H - pad; nodes[i].vy *= -0.5; }
      }
    }

    // Warm up simulation
    for (var s = 0; s < 300; s++) simStep();

    // Rendering
    var fgHovered = -1;
    var fgDragging = -1;

    function drawGraph() {
      fctx.clearRect(0, 0, W, H);

      // Edges
      for (var i = 0; i < edges.length; i++) {
        var a = nodes[edges[i][0]], b = nodes[edges[i][1]];
        var aCat = N[edges[i][0]].c, bCat = N[edges[i][1]].c;
        var highlighted = (fgHovered === edges[i][0] || fgHovered === edges[i][1]);
        fctx.beginPath();
        fctx.moveTo(a.x, a.y);
        fctx.lineTo(b.x, b.y);
        if (highlighted) {
          fctx.strokeStyle = CC[bCat] ? CC[bCat].s : '#444';
          fctx.globalAlpha = 0.6;
          fctx.lineWidth = 1.5;
        } else {
          fctx.strokeStyle = '#333';
          fctx.globalAlpha = 0.25;
          fctx.lineWidth = 0.8;
        }
        fctx.stroke();
        fctx.globalAlpha = 1;
      }

      // Nodes
      for (var i = 0; i < N.length; i++) {
        var nd = N[i];
        var nx = nodes[i].x, ny = nodes[i].y;
        var col = CC[nd.c] || CC.instrument;
        var hov = (i === fgHovered);
        var connected = false;
        if (fgHovered >= 0 && fgHovered !== i) {
          for (var j = 0; j < adj[fgHovered].length; j++) {
            if (adj[fgHovered][j] === i) { connected = true; break; }
          }
        }
        var dimmed = (fgHovered >= 0 && !hov && !connected);

        var r = nd.r * (IS_MOBILE ? 0.8 : 1);
        if (hov) r *= 1.3;

        // Glow for anchors / hovered
        if ((nd.c === 'anchor' || nd.c === 'engine' || hov) && !dimmed) {
          fctx.save();
          fctx.shadowColor = col.s;
          fctx.shadowBlur = hov ? 18 : 10;
          fctx.beginPath();
          fctx.arc(nx, ny, r, 0, Math.PI * 2);
          fctx.fillStyle = 'rgba(0,0,0,0.01)';
          fctx.fill();
          fctx.restore();
        }

        // Circle fill
        fctx.beginPath();
        fctx.arc(nx, ny, r, 0, Math.PI * 2);
        fctx.globalAlpha = dimmed ? 0.15 : 1;
        fctx.fillStyle = hov ? col.s : (nd.c === 'anchor' ? 'rgba(229,62,62,0.3)' :
                         nd.c === 'engine' ? 'rgba(229,62,62,0.2)' :
                         nd.c === 'parent' ? 'rgba(245,158,11,0.2)' :
                         nd.c === 'kernel' ? 'rgba(229,62,62,0.12)' :
                         nd.c === 'domain' ? 'rgba(104,211,145,0.15)' :
                         nd.c === 'reference' ? 'rgba(196,168,168,0.1)' :
                         nd.c === 'research' ? 'rgba(245,158,11,0.12)' :
                         'rgba(102,102,102,0.12)');
        fctx.fill();

        // Circle stroke
        fctx.beginPath();
        fctx.arc(nx, ny, r, 0, Math.PI * 2);
        fctx.strokeStyle = col.s;
        fctx.lineWidth = hov ? 2 : 1;
        fctx.globalAlpha = dimmed ? 0.1 : (hov ? 1 : 0.6);
        fctx.stroke();
        fctx.globalAlpha = 1;

        // Emoji icon (only if node big enough)
        if (r >= 5) {
          var emojiSize = Math.max(8, Math.round(r * 1.1));
          fctx.font = emojiSize + 'px serif';
          fctx.textAlign = 'center';
          fctx.textBaseline = 'middle';
          fctx.globalAlpha = dimmed ? 0.15 : 1;
          fctx.fillText(nd.i, nx, ny - 1);
          fctx.globalAlpha = 1;
        }

        // Name label (only for bigger nodes or hovered)
        if (r >= 7 || hov) {
          var nameSize = Math.max(7, Math.round(r * 0.7));
          if (nd.c === 'anchor') nameSize = 11;
          else if (nd.c === 'engine' || nd.c === 'parent') nameSize = 9;
          fctx.font = '600 ' + nameSize + 'px Inter, sans-serif';
          fctx.textAlign = 'center';
          fctx.textBaseline = 'top';
          fctx.fillStyle = hov ? '#FFFFFF' : col.t;
          fctx.globalAlpha = dimmed ? 0.1 : (hov ? 1 : 0.7);
          fctx.fillText(nd.n, nx, ny + r + 3);
          fctx.globalAlpha = 1;
        }
      }
    }

    // Hit test
    function hitTest(mx, my) {
      for (var i = N.length - 1; i >= 0; i--) {
        var dx = mx - nodes[i].x, dy = my - nodes[i].y;
        var hitR = Math.max(N[i].r * 1.5, 10);
        if (dx*dx + dy*dy < hitR*hitR) return i;
      }
      return -1;
    }

    // Mouse interaction
    var fgMouseX = 0, fgMouseY = 0;
    function getPos(e) {
      var rect = fgCanvas.getBoundingClientRect();
      return { x: e.clientX - rect.left, y: e.clientY - rect.top };
    }

    fgCanvas.addEventListener('mousemove', function(e) {
      var p = getPos(e);
      fgMouseX = e.clientX; fgMouseY = e.clientY;
      if (fgDragging >= 0 && !nodes[fgDragging].pinned) {
        nodes[fgDragging].x = p.x;
        nodes[fgDragging].y = p.y;
        nodes[fgDragging].vx = 0;
        nodes[fgDragging].vy = 0;
      }
      var idx = hitTest(p.x, p.y);
      if (idx !== fgHovered) {
        fgHovered = idx;
        fgCanvas.style.cursor = idx >= 0 ? 'pointer' : 'grab';
      }
      var tip = document.getElementById('fg-tooltip');
      if (fgHovered >= 0) {
        tip.textContent = N[fgHovered].n;
        tip.classList.add('show');
      } else {
        tip.classList.remove('show');
      }
      tip.style.left = (e.clientX + 14) + 'px';
      tip.style.top = (e.clientY - 36) + 'px';
    });

    fgCanvas.addEventListener('mousedown', function(e) {
      var p = getPos(e);
      var idx = hitTest(p.x, p.y);
      if (idx >= 0) {
        fgDragging = idx;
        fgCanvas.style.cursor = 'grabbing';
      }
    });

    fgCanvas.addEventListener('mouseup', function(e) {
      if (fgDragging >= 0) {
        // If barely moved, treat as click
        var p = getPos(e);
        var dx = p.x - nodes[fgDragging].x, dy = p.y - nodes[fgDragging].y;
        if (dx*dx + dy*dy < 4 && N[fgDragging].u) {
          window.open(N[fgDragging].u, '_self');
        }
        fgDragging = -1;
        fgCanvas.style.cursor = fgHovered >= 0 ? 'pointer' : 'grab';
      }
    });

    fgCanvas.addEventListener('mouseleave', function() {
      fgHovered = -1;
      fgDragging = -1;
      document.getElementById('fg-tooltip').classList.remove('show');
    });

    // Touch support
    fgCanvas.addEventListener('touchstart', function(e) {
      var t = e.touches[0];
      var rect = fgCanvas.getBoundingClientRect();
      var p = { x: t.clientX - rect.left, y: t.clientY - rect.top };
      var idx = hitTest(p.x, p.y);
      if (idx >= 0) { fgDragging = idx; fgHovered = idx; e.preventDefault(); }
    }, { passive: false });

    fgCanvas.addEventListener('touchmove', function(e) {
      if (fgDragging >= 0) {
        var t = e.touches[0];
        var rect = fgCanvas.getBoundingClientRect();
        nodes[fgDragging].x = t.clientX - rect.left;
        nodes[fgDragging].y = t.clientY - rect.top;
        nodes[fgDragging].vx = 0;
        nodes[fgDragging].vy = 0;
        e.preventDefault();
      }
    }, { passive: false });

    fgCanvas.addEventListener('touchend', function(e) {
      if (fgDragging >= 0 && N[fgDragging].u) {
        window.open(N[fgDragging].u, '_self');
      }
      fgDragging = -1;
      fgHovered = -1;
    });

    // Animation loop (gentle continuous settling)
    var fgFrame;
    function fgLoop() {
      simStep();
      drawGraph();
      fgFrame = requestAnimationFrame(fgLoop);
    }

    // Start when visible via IntersectionObserver
    var fgRunning = false;
    var fgObs = new IntersectionObserver(function(entries) {
      if (entries[0].isIntersecting && !fgRunning) {
        fgRunning = true;
        fgLoop();
      } else if (!entries[0].isIntersecting && fgRunning) {
        fgRunning = false;
        cancelAnimationFrame(fgFrame);
      }
    }, { threshold: 0.05 });
    fgObs.observe(fgCanvas);

    // Resize
    window.addEventListener('resize', function() {
      var oldW = W, oldH = H;
      sizeCanvas();
      // Rescale node positions
      var sx = W / oldW, sy = H / oldH;
      for (var i = 0; i < nodes.length; i++) {
        nodes[i].x *= sx;
        nodes[i].y *= sy;
      }
    });
  })(); }

})();
</script>

<!-- ═══════════ Temporal & Spatial Panel Toggles ═══════════ -->
<script>
(function() {
  var temporalOpen = false;
  var spatialOpen = false;

  window.toggleTemporal = function() {
    var panel = document.getElementById('temporal-panel');
    var card = document.querySelector('.card-temporal');
    temporalOpen = !temporalOpen;
    if (temporalOpen) {
      card.classList.add('active');
      panel.classList.add('open');
    } else {
      card.classList.remove('active');
      panel.classList.remove('open');
    }
  };

  window.toggleSpatial = function() {
    var panel = document.getElementById('spatial-panel');
    var card = document.querySelector('.card-spatial');
    spatialOpen = !spatialOpen;
    if (spatialOpen) {
      card.classList.add('active');
      panel.classList.add('open');
    } else {
      card.classList.remove('active');
      panel.classList.remove('open');
    }
  };
})();
</script>


</body>
</html>
